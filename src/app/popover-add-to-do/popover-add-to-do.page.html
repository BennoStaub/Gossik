<ion-content class="width-100">
  <div>
    <ion-row class="margin-top-35 color-39297F">
      <ion-col size="4">
        <button *ngIf="type != 'show'" class="transparent color-6049C4 font-size-17px" (click)="cancel()">
          {{"Cancel" | translate}}
        </button>
        <button *ngIf="type == 'show'" class="transparent color-6049C4 font-size-17px" (click)="cancel()">
          {{"Close" | translate}}
        </button>
      </ion-col>
      <ion-col size="4" class="text-align-center font-size-17px font-weight-bold">
        {{"To-Do" | translate}}
      </ion-col>
      <ion-col size="4">
        <button *ngIf="type != 'show' || (type == 'show' && changed)" class="transparent color-6049C4 font-size-17px" (click)="save()" color="tertiary">
          {{"Save" | translate}}
        </button>
      </ion-col>
    </ion-row>
    <ion-row>
      <div class="width-90 border-6049C4-50per border-radius-15px margin-top-20-auto flex">
        <ion-input (ionInput)="change()" [(ngModel)]="todo.content" placeholder="{{'To-Do' | translate}}" type="text" class="display-inline-block width-100-minus-26 margin-left-10 text-align-left color-39297F"></ion-input>
      </div>
    </ion-row>
    <ion-row>
      <div class="margin-top-20-auto flex background-EDF2FF border-radius-10px padding-right-5">
        <img src="../../assets/icon/purple/icon_duration_active.svg" height="12" class="margin-left-5-auto">
        <ion-input (ionInput)="change()" size="2" [ngStyle]="todo.time&&{'width': 13 + todo.time.toString().length * 12 + 'px'}" [(ngModel)]="todo.time" placeholder="{{'Duration' | translate}}" type="number" class="duration-input width-auto no-padding margin-left-5 text-align-center color-6049C4"></ion-input>
        <span *ngIf="todo.time > 0" class="color-6049C4 margin-left-minus-8 margin-vertical-auto">{{"Minutes" | translate}}</span>
      </div>
    </ion-row>
    <ion-row>
      <div class="margin-top-20-auto flex background-EDF2FF border-radius-10px padding-right-5 height-36px">
        <img src="../../assets/icon/purple/icon_priority.svg" height="12" class="margin-left-5-auto">
        <span *ngIf="todo.priority" (click)="openPicker('priority')" class="color-6049C4 font-size-15px margin-vertical-auto margin-left-5">
          {{priorities[todo.priority] | translate}}
        </span>
        <span *ngIf="!todo.priority" (click)="openPicker('priority')" class="color-6049C4 margin-vertical-auto margin-left-5">{{"Priority" | translate}}</span>
      </div>
    </ion-row>
    <ion-row>
      <ion-row class="margin-horizontal-auto">
        <span class="margin-top-20-auto flex background-EDF2FF border-radius-10px padding-right-5 height-36px">
          <img src="../../assets/icon/purple/icon_project.svg" height="12" class="margin-left-5-auto">
          <span *ngIf="todo.goalid && todo.goalid != 'unassigned'" (click)="openPicker('project')" class="color-6049C4 margin-vertical-auto margin-left-5">
            {{goalDict[todo.goalid].name}}
          </span>
          <span *ngIf="!(todo.goalid && todo.goalid != 'unassigned')" (click)="openPicker('project')" class="color-6049C4 margin-vertical-auto margin-left-5">{{"Project" | translate}}</span>
        </span>
        <span class="margin-top-20-auto flex height-36px" (click)="addProject()">
          <img src="../../assets/icon/purple/icon_add.svg" height="20" class="margin-vertical-auto margin-left-10">
        </span>
      </ion-row>
    </ion-row>
    <ion-row *ngIf="type != 'show'" class="margin-bottom-10">
      <div class="margin-top-20-auto flex background-EDF2FF border-radius-10px padding-right-5 height-36px">
        <img src="../../assets/icon/purple/icon_calendar_active.svg" height="12" class="margin-left-5-auto">
        <button *ngIf="!todo.deadline" class="font-size-16px transparent no-padding text-align-left display-inline-block color-6049C4 margin-left-5" (click)="assignDeadline()">{{"Deadline" | translate}}
        </button>
        <button *ngIf="todo.deadline" class="font-size-16px transparent no-padding text-align-left display-inline-block color-6049C4 margin-left-5" (click)="assignDeadline()">{{deadlineText}}
        </button>
      </div>
    </ion-row>
    <ion-row *ngIf="type == 'show'">
      <div class="margin-top-20-auto flex background-EDF2FF border-radius-10px padding-right-5 height-36px">
        <img src="../../assets/icon/purple/icon_calendar_active.svg" height="12" class="margin-left-5-auto">
        <button *ngIf="!todo.deadline" class="font-size-16px transparent no-padding text-align-left display-inline-block color-6049C4 margin-left-5" (click)="assignDeadline()">{{"Deadline" | translate}}
        </button>
        <button *ngIf="todo.deadline" class="font-size-16px transparent no-padding text-align-left display-inline-block color-6049C4 margin-left-5" (click)="assignDeadline()">{{deadlineText}}
        </button>
      </div>
    </ion-row>
    <ion-row *ngIf="type == 'show'">
      <div class="margin-top-20-auto flex border-radius-10px padding-right-5 height-36px">
        <button class="font-size-20px transparent font-red border-1px-red border-radius-20px" (click)="deleteToDo()">{{"Delete" | translate}}</button>
      </div>
    </ion-row>
    <ion-row *ngIf="type == 'show'"class="height-98px background-EDF2FF margin-top-20">
        <span class="margin-auto">
          <button class="font-size-20px height-36px border-radius-20px background-FFFFFF color-6049C4" (click)="markDoneToDo()">{{"Mark Done" | translate}}</button>
          <button class="font-size-20px height-36px border-radius-20px background-6049C4 color-FFFFFF margin-left-20" (click)="startToDo()">{{"Start To-do" | translate}}</button>
        </span>
    </ion-row>
  </div>
</ion-content>