<ion-header>
  <ion-toolbar color="secondary">
    <button float-right class="icon-only-button margin-right-20" (click)="cancel()">
      <img src="../../assets/icon/icon_cancel.png" height="20">
    </button>
    <ion-title class="padding-30">{{"Delegation Details" | translate }}</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content class="background-gray">
        <ion-list inset class="text-align-center transparent">
          <form (ngSubmit)="check()" [formGroup]="defineDelegationForm">
            <ion-item no-lines class="transparent no-scrollbar">
              <ion-textarea class="font-white" autoGrow="true" [(ngModel)]="delegation.content" formControlName="content"></ion-textarea>
            </ion-item>
            <div *ngIf="delegation.deadline" class="transparent font-white">
              <div *ngIf="!edit" class="transparent font-white">
                <ion-item no-lines class="transparent font-white">
                  {{"Deadline" | translate}}: {{deadlineString}}
                  <button class="transparent font-white" type="button" (click)="editDeadline()">{{"Edit" | translate }}</button>
                </ion-item>
              </div>
              <div *ngIf="edit" class="transparent font-white">
                <ion-card class="transparent font-white">
                  <ion-row>
                  {{viewTitle}}
                  </ion-row>
                  <calendar [eventSource]="eventSource"
                            [currentDate]="currentDate"
                            (onTitleChanged)="onViewTitleChanged($event)"
                            (onTimeSelected)="onTimeSelected($event)"
                            step="5"
                            class="calendar height-100 width-100 font-size-0-8rem"
                            autoSelect="false"
                            scrollToHour="8"
                            startingDayWeek="1"
                            [showEventDetail]="false">
                  </calendar> 
                </ion-card>
              </div>
            </div>
            <div *ngIf="!delegation.deadline" class="transparent font-white">
              <ion-item no-lines class="transparent font-white">
                <button class="transparent font-white" type="button" (click)="editDeadline()">{{"Add deadline" | translate }}</button>
              </ion-item>
              <div *ngIf="edit" class="transparent font-white">
                <ion-card class="transparent font-white">
                  <ion-row>
                  {{viewTitle}}
                  </ion-row>
                  <calendar [eventSource]="eventSource"
                            [currentDate]="currentDate"
                            (onTitleChanged)="onViewTitleChanged($event)"
                            (onTimeSelected)="onTimeSelected($event)"
                            step="5"
                            class="calendar height-100 width-100 font-size-0-8rem"
                            autoSelect="false"
                            scrollToHour="8"
                            startingDayWeek="1"
                            [showEventDetail]="false">
                  </calendar> 
                </ion-card>
              </div>
            </div>
            <button class="transparent font-white" type="submit">{{"Save" | translate }}</button>
            <button class="button-left transparent font-white" type="button" (click)="deleteDelegation()">{{"Delete" | translate }}</button>
          </form>
        </ion-list>
</ion-content>

