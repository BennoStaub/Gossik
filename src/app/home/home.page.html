<ion-header>
	<ion-toolbar color="secondary">
    <div *ngIf="loggedin">
  		<div *ngIf="isApp && viewpoint == 'CapturePage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'ProcessPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == ''">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'ToDoPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'ActionPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'FinishGoalPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'StopActionPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'CalendarPage'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'ProjectsPage' && pageCtrl != 'ProjectOverview'">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <ion-menu-button autoHide="false">
                <img src="../../assets/icon/icon_menu.png" height="17">
              </ion-menu-button>
            </ion-col>
            <ion-col size="8">
            </ion-col>
            <ion-col size="2" class="flex text-align-center no-padding">
              <button class="transparent" (click)="goToCalendarPage()">
                <img src="../../assets/icon/icon_calendar.png" height="23" class="margin-auto-auto">
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
      <div *ngIf="isApp && viewpoint == 'ProcessCapturePage'">
        <button class="transparent" (click)="goToProcessPage()">
          <img src="../../assets/icon/icon_arrow_left.png" height="17">
        </button>
      </div>
      <div *ngIf="isApp && viewpoint == 'ProjectsPage' && pageCtrl == 'ProjectOverview'">
        <button class="transparent" (click)="goToProjectsPage()">
          <img src="../../assets/icon/icon_arrow_left.png" height="17">
        </button>
      </div>
      <div class="header-container" *ngIf="!isApp">
        	<button class="header-icon" (click)="goToCapturePage()">
        		<img class="header-logo" src="../../assets/icon/logo_schriftzug_weiss.png" height="60">
      	</button>
  	    <div class="header-icons-div">
  	      <button class="header-icon" (click)="goToCalendarPage()">
  	        <img src="../../assets/icon/icon_calendar.png" height="20"> {{"Calendar" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToToDoPage()">
  	        <img src="../../assets/icon/icon_todo.png" height="20"> {{"ToDo" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToProjectsPage()">
  	        <img src="../../assets/icon/icon_projects.png" height="20"> {{"Projects" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToCapturePage()">
  	        <img src="../../assets/icon/icon_captures.png" height="20"> {{"Captures" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToSettingsPage()">
  	        <img src="../../assets/icon/icon_settings.png" height="20"> {{"Settings" | translate }}
  	      </button>
  	    </div>
    	</div>
    </div>
    <div class="font-gray text-align-center">{{pageTitle | translate}}</div>
	</ion-toolbar>
</ion-header>

<ion-content class="background-gray">

  <span class="font-white">{{errorMsg | translate}}</span>

  <!-- LoginPage -->
	<div *ngIf="viewpoint == 'LoginPage'" class="transparent height-100-minus-70px">
		<ion-card class="transparent">
			<div *ngIf="pageCtrl == ''" class="transparent">
				<form (ngSubmit)="login()" [formGroup]="loginForm">
					<ion-list inset class="transparent">
						<ion-item no-lines class="transparent font-white">
							<ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}..." formControlName="email"></ion-input>
						</ion-item>
						<ion-item no-lines class="transparent font-white">
							<ion-input class="border-bottom-1" type="password" placeholder="{{'Password' | translate }}..." formControlName="password"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal class="transparent font-white text-align-center">
						<div class="form-error">{{loginError}}</div>
						<button class="transparent font-white margin-auto" expand="block" type="submit" [disabled]="!loginForm.valid">{{"Log in" | translate }}</button>	
					</div>
				</form>
				<ion-list class="transparent margin-top-45">
					<button icon-left class="signInButton transparent font-white" (click)="goToSignUp()">
						{{"Sign up" | translate }}
					</button>
          <br>
					<button icon-left class="signInButton transparent font-white" (click)="goToForgotPassword()">
						{{"Forgot password" | translate }}
					</button>
          <br>
          <button class="signInButton transparent font-white" (click)="goToPrivacyPolicyPage()">
            {{"Privacy Policy" | translate }}
          </button>
				</ion-list>
			</div>
			<div *ngIf="pageCtrl == 'forgotPassword'" class="transparent font-white">
				<form (ngSubmit)="resetPassword()" [formGroup]="forgotPasswordForm">
					<ion-list inset class="transparent font-white">
						<ion-item no-lines class="transparent font-white">
							<ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}..." formControlName="email"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal class="transparent font-white text-align-center">
						<button class="transparent font-white" expand="block" type="submit" [disabled]="!forgotPasswordForm.valid">{{"Reset password" | translate }}</button>			
					</div>
				</form>
        <ion-list class="transparent margin-top-45">
          <button icon-left class="signInButton transparent font-white" (click)="goToSignUp()">
            {{"Sign up" | translate }}
          </button>
          <br>
          <button icon-left class="signInButton transparent font-white" (click)="goToLoginPage()">
            {{"Login" | translate }}
          </button>
          <br>
          <button class="signInButton transparent font-white" (click)="goToPrivacyPolicyPage()">
            {{"Privacy Policy" | translate }}
          </button>
        </ion-list>
			</div>
			<div *ngIf="pageCtrl == 'signUp'" class="transparent font-white">
				<form (ngSubmit)="signUp()" [formGroup]="signUpForm">
					<ion-list inset class="transparent font-white">
						<ion-item no-lines class="transparent font-white">
							<ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}..." formControlName="email"></ion-input>
						</ion-item>
						<ion-item no-lines class="transparent font-white">
							<ion-input class="border-bottom-1" type="password" placeholder="{{'Password' | translate }}..." formControlName="password"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal class="transparent font-white text-align-center">
						<button class="transparent font-white" expand="block" type="submit" [disabled]="!signUpForm.valid">{{"Sign up" | translate }}</button>
					</div>
				</form>
        <ion-list class="transparent margin-top-45">
          <button icon-left class="signInButton transparent font-white" (click)="goToLoginPage()">
            {{"Login" | translate }}
          </button>
          <br>
          <button icon-left class="signInButton transparent font-white" (click)="goToForgotPassword()">
            {{"Forgot password" | translate }}
          </button>
          <br>
          <button class="signInButton transparent font-white" (click)="goToPrivacyPolicyPage()">
            {{"Privacy Policy" | translate }}
          </button>
        </ion-list>
			</div>
		</ion-card>
	</div>

  <!-- SettingsPage -->
  <div class="margin-top-10 width-90 padding-10 transparent height-100-minus-70px" *ngIf="viewpoint == 'SettingsPage'">
    <button class="transparent font-white width-auto display-block margin-top-10" (click)="logout()">{{"Logout" | translate}}</button>
    <button class="transparent font-white width-auto display-block margin-top-10" (click)="goToFeedbackPage()">
      {{"Give feedback" | translate }}
    </button>
    <button class="transparent font-white width-auto display-block margin-top-10" (click)="goToPrivacyPolicyPage()">
      {{"Privacy Policy" | translate }}
    </button>
    <button class="transparent font-white width-auto display-block margin-top-10" (click)="goToShowFeedbackPage()" *ngIf="isAdmin">
      {{"Show Feedback" | translate }}
    </button>
    <button class="transparent font-white width-auto display-block margin-top-10" (click)="goToSendPushPage()" *ngIf="isAdmin">
      {{"Send Push" | translate }}
    </button>
  </div>

  <!-- FeedbackPage -->
  <div class="margin-top-10 padding-10 transparent font-white text-align-center height-100-minus-70px" *ngIf="viewpoint == 'FeedbackPage'">
    <ion-textarea class="feedback transparent border-bottom-1" rows="3" autoGrow="true" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="feedback" placeholder="{{'Input feedback'| translate}}..."></ion-textarea>
    <button class="transparent font-white width-auto margin-top-10" (click)="sendFeedback(feedback)">{{"Send feedback" | translate}}</button>
  </div>

  <!-- ShowFeedbackPage -->
  <div class="margin-top-10 padding-10 transparent text-align-center height-100-minus-70px" *ngIf="viewpoint == 'ShowFeedbackPage'">
    <ion-item class="margin-bottom-10 transparent font-white border-bottom-1" *ngFor="let feedback of feedbackArray">{{feedback.feedback}}</ion-item>
  </div>

  <!-- SendPushPage -->
  <div class="margin-top-10 padding-10 transparent text-align-center height-100-minus-70px" *ngIf="viewpoint == 'SendPushPage'">
    <ion-textarea class="feedback transparent font-white border-bottom-1" autoGrow="true" rows="3" cols="14" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="manualPushEN" placeholder="{{'Input EN push'| translate}}..."></ion-textarea>
    <br>
    <ion-textarea class="feedback transparent font-white border-bottom-1" autoGrow="true" rows="3" cols="14" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="manualPushDE" placeholder="{{'Input DE push'| translate}}..."></ion-textarea>
    <button class="transparent font-white width-auto margin-top-10 border-bottom-1" (click)="sendPush(manualPushEN, manualPushDE)">{{"Send push" | translate}}</button>
  </div>

	<!-- CapturePage -->
  <div *ngIf="viewpoint == 'CapturePage' && !isApp">
    <ion-row class="width-40 margin-auto margin-top-10 height-20">
      <ion-card class="margin-top-10 width-100 text-align-center height-40 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-150px">
        <ion-item class="height-50 border-radius-20px">
          <ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}..."></ion-input>
        </ion-item>
        <ion-button class="darkbutton width-auto" (click)="addCapture(newCapture)">{{"Add" | translate}}</ion-button>
      </ion-card>
    </ion-row>
    <div *ngIf="takenActionListNotEmpty || captureListNotEmpty" class="secondary border-radius-20px width-90 margin-top-10 padding-bottom-10">
      <div *ngIf="takenActionListNotEmpty">
        <h3 class="padding-left-20">{{"Taken actions ready for processing" | translate}}:</h3>
        <button class="background-white width-100 text-align-left border-bottom-1 padding-left-20 padding-top-10" *ngFor="let takenAction of takenActionArray" (click)="goToProcessTakenActionPage(takenAction)">{{"You started with action" |translate}} "{{takenAction.content}}" {{", click here to process" | translate }}
        </button>
      </div>
      <div *ngIf="captureListNotEmpty">
        <h3 class="padding-left-20">{{"Thoughts captured and ready for processing" | translate}}:</h3>
        <ion-grid>
          <ion-row class="background-white border-bottom-1 width-100 min-height-30px" *ngFor="let capture of captureArray">
            <ion-col size="10" class="height-100">
              <button class="background-white text-align-left" (click)="goToProcessCapturePage(capture)">{{capture.content}}
              </button>
            </ion-col>
            <ion-col size="2" class="height-100">
              <button class="background-white" float-right (click)="deleteCapture(capture)">{{ "Delete" | translate }}</button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>
  </div>
  <!-- Mobile CapturePage -->
  <div *ngIf="viewpoint == 'CapturePage' && isApp" class="height-100-minus-70px">
      <ion-card class="width-100 margin-0 text-align-center overflow-scroll no-scrollbar display-inline-block transparent min-height-150px">
        <ion-row class="width-90 margin-top-45 margin-left-auto margin-right-auto">
          <ion-col size="9.6" class="no-padding">
          <ion-input class="border-bottom-1 transparent display-inline-block margin-0 width-90 font-size-30px placeholder-white" type="text" (ionFocus)="ionFocus($event)" (ionBlur)="ionBlurCapture($event)" (keyup.enter)="addCapture(newCapture)" autocapitalize="on" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}..."></ion-input>
          </ion-col>
          <!--
          <ion-col size="1.2" class="flex text-align-center no-padding">
            <button class="transparent no-padding" (click)="addCapturePicture()">
              <img src="../../assets/icon/icon_camera.png" height="15">
            </button>
          </ion-col>
          <ion-col size="1.2" class="flex text-align-center no-padding">
            <button class="transparent no-padding margin-auto" (click)="addCaptureVoice()">
              <img src="../../assets/icon/icon_microphone.png" height="20" class="margin-bottom-3">
            </button>
          </ion-col>
        -->
        </ion-row>
        <ion-row class="width-50 margin-top-85 margin-right-auto margin-left-auto">
          <ion-col size="6" class="flex text-align-center no-padding">
            <button class="transparent margin-auto-auto" (click)="cancelCapture()">
              <img src="../../assets/icon/icon_cancel.png" class="margin-bottom-3 img-height-60px img-width-60px">
            </button>
          </ion-col>
          <ion-col size="6" class="flex text-align-center">
            <button class="transparent no-padding margin-auto" (click)="addCapture(newCapture)">
              <img src="../../assets/icon/icon_confirm.png" class="margin-bottom-3 img-height-90px img-width-70px">
            </button>
          </ion-col>
        </ion-row>
      </ion-card>
    <!--
    <div *ngIf="takenActionListNotEmpty || captureListNotEmpty" class="secondary border-radius-20px width-90 margin-top-10 padding-bottom-10">
      <div *ngIf="takenActionListNotEmpty">
        <h3 class="padding-left-20">{{"Taken actions ready for processing" | translate}}:</h3>
        <button class="background-white width-100 text-align-left border-bottom-1 padding-left-20 padding-top-10" *ngFor="let takenAction of takenActionArray" (click)="goToProcessTakenActionPage(takenAction)">{{"You started with action" |translate}} "{{takenAction.content}}" {{", click here to process" | translate }}
        </button>
      </div>
    </div>
    -->
  </div>

  <!-- ProcessPage -->
  <div *ngIf="viewpoint == 'ProcessPage' && !isApp">
    <div *ngIf="captureListNotEmpty">
      <h3 class="padding-left-20">{{"Thoughts captured and ready for processing" | translate}}:</h3>
      <ion-grid>
        <ion-row class="background-white border-bottom-1 width-100 min-height-30px" *ngFor="let capture of captureArray">
          <ion-col size="10" class="height-100">
            <button class="background-white text-align-left" (click)="goToProcessCapturePage(capture)">{{capture.content}}
            </button>
          </ion-col>
          <ion-col size="2" class="height-100">
            <button class="background-white" float-right (click)="deleteCapture(capture)">{{ "Delete" | translate }}</button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ProcessPage -->
  <div *ngIf="viewpoint == 'ProcessPage' && isApp" class="no-scrollbar height-100-minus-70px">
    <ion-grid class="height-100 overflow-scroll">
      <ion-row class="transparent width-90 margin-auto margin-bottom-3 one-line overflow-x-hidden" *ngFor="let capture of captureArray">
        <ion-col size="1" class="no-padding flex">
          <img src="../../assets/imgs/circle_white.png" height="15" class="margin-auto-auto">
        </ion-col>
        <ion-col size="11" class="text-align-left">
          <button class="transparent text-color-white text-align-left" (click)="goToProcessCapturePage(capture)">
            <span class="font-size-20px">
              {{capture.content}}
            </span>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
    <button (click)="goToCapturePage()" class="position-absolute top-0 right-0 font-white background-black">
      <img src="../../assets/icon/icon_add.png" class="margin-auto-auto img-height-60px img-width-60px">
    </button>
  </div>

  <!-- ProcessCapturePage -->
  <div *ngIf="viewpoint=='ProcessCapturePage' && !isApp">
    <div *ngIf="pageCtrl == ''">
      <ion-grid>
        <ion-row class="width-100">
          <ion-col size="3">
            <ion-card class="width-100 margin-top-0 secondary border-radius-20px text-align-center overflow-y-scroll no-scrollbar">
              <div class="height-100 width-100 max-height-500px margin-vertical-center-parent overflow-y-scroll no-scrollbar">
              <p class="width-100 margin-10px overflow-y-scroll no-scrollbar text-align-center">{{capture.content}}</p>
            </div>
            <ion-button class="darkbutton display-block" (click)="deleteCapture(capture)">{{ "Delete" | translate }}</ion-button>
            </ion-card>
            <ion-card class="text-align-center margin-top-10 overflow-scroll no-scrollbar width-100 margin-left-0 display-inline-block secondary border-radius-20px">
              <ion-item class="border-radius-20px">
                <ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}..."></ion-input>
              </ion-item>
              <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
            </ion-card>
          </ion-col>
          <ion-col>
            <ion-card class="width-400px overflow-x-hidden text-align-center margin-top-0 height-20 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-100px" no-lines *ngFor="let goal of goalArray">
              <ion-grid>
                <ion-row>
                    <h1 class="max-height-30px margin-0 overflow-x-hidden width-90 display-inline-block">{{goal.name}}</h1>
                    <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
                </ion-row>
                <ion-row >
                  <ion-button class="darkbutton button-left" (click)="addAction(goal, capture)">{{"Action" | translate }}</ion-button>
                  <ion-button class="darkbutton button-left" (click)="addDelegation(goal, capture)">{{"Delegation" | translate }}</ion-button>
                  <ion-button class="darkbutton button-left" (click)="addReference(goal, capture)">{{"Reference" | translate }}</ion-button>
                </ion-row>
              </ion-grid>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ProcessCapturePage -->
  <div *ngIf="viewpoint=='ProcessCapturePage' && isApp" class="height-100-minus-70px">
    <ion-grid class="padding-20 padding-top-0 height-100 overflow-scroll no-scrollbar">
      <ion-card class="text-align-center margin-5 text-color-white transparent width-100 height-30px" *ngIf="capture.content">{{capture.content}}
      </ion-card>
      <ion-row *ngIf="pageCtrl == ''">
        <button class="no-padding transparent text-color-white text-align-left width-100" (click)="assignProject()">
          <span class="font-size-1rem">
            {{"Project" | translate }}
          </span>
          <div *ngIf="captureProject" class="width-100 margin-left-50 overflow-x-hidden margin-top-10 font-size-1rem">
            {{captureProject.name}}
          </div>
          <div *ngIf="!captureProject" class="width-100 margin-left-50 overflow-x-hidden margin-top-10 font-size-1rem">
            {{"Assign project" | translate}}...
          </div>
        </button>
      </ion-row>
      <ion-row *ngIf="pageCtrl != '' && captureProject.name">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('')">
          <span class="font-size-1rem">
            {{"Project" | translate }}
          </span>
          <div class="width-100 margin-left-50 overflow-x-hidden margin-top-10 font-size-1rem">
            {{captureProject.name}}
          </div>
        </button>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'type'">
        <span class="font-size-1rem font-white">
          {{"Type" | translate }}
        </span>
        <div class="width-100 margin-top-10 font-size-1rem">
          <ion-row class="width-100">
            <ion-col>
              <button *ngIf="captureType == 'action'" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignAction()">{{"Action" | translate}}
              </button>
              <button *ngIf="captureType != 'action'" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignAction()">{{"Action" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="captureType == 'note'" class="display-inline-block transparent font-white text-align-left width-100" (click)="assignNote()">{{"Note" | translate}}
              </button>
              <button *ngIf="captureType != 'note'" class="display-inline-block transparent font-gray text-align-left width-100" (click)="assignNote()">{{"Note" | translate}}
              </button>
            </ion-col>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl != 'type' && captureType">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('type')">
          <span class="font-size-1rem font-gray">
            {{"Type" | translate }}
          </span>
        </button>
        <div class="width-100 margin-top-10 font-size-1rem">
          <ion-row class="width-100">
            <ion-col>
              <button *ngIf="captureType == 'action'" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignAction()">{{"Action" | translate}}
              </button>
              <button *ngIf="captureType != 'action'" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignAction()">{{"Action" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="captureType == 'note'" class="display-inline-block transparent font-white text-align-left width-100" (click)="assignNote()">{{"Note" | translate}}
              </button>
              <button *ngIf="captureType != 'note'" class="display-inline-block transparent font-gray text-align-left width-100" (click)="assignNote()">{{"Note" | translate}}
              </button>
            </ion-col>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'content'">
          <span *ngIf="captureType == 'action'" class="font-size-1rem font-white">
            {{"Action" | translate }}
          </span>
          <span *ngIf="captureType == 'note'" class="font-size-1rem font-white">
            {{"Note" | translate }}
          </span>
          <div class="width-90 margin-left-50 margin-top-10 font-size-1rem">
            <ion-textarea *ngIf="captureType == 'action'" class="font-white transparent margin-0 width-90 text-align-left border-bottom-1" type="text" autoGrow="true" (ionBlur)="assignContent($event)" (keyup.enter)="assignContent($event)" autocapitalize="on" [(ngModel)]="captureContent" placeholder="{{'Define action' | translate}}..." (ionFocus)="ionFocus($event)"></ion-textarea>
            <ion-textarea *ngIf="captureType == 'note'" class="font-white transparent margin-0 width-90 text-align-left border-bottom-1" type="text" autoGrow="true" (ionBlur)="assignContent($event)" (keyup.enter)="assignContent($event)" autocapitalize="on" [(ngModel)]="captureContent" placeholder="{{'Define reference' | translate}}..." (ionFocus)="ionFocus($event)"></ion-textarea>
            <button *ngIf="capture.content" class="transparent font-white" (click)="setCaptureContent(capture)">{{"Paste capture" | translate}}</button>
          </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl != 'content' && captureContent && captureType">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('content')">
          <span *ngIf="captureType == 'action'" class="font-size-1rem font-gray">
            {{"Action" | translate }}
          </span>
          <span *ngIf="captureType == 'note'" class="font-size-1rem font-gray">
            {{"Note" | translate }}
          </span>
        </button>
        <div class="width-100 margin-left-50 overflow-x-hidden margin-top-10 font-size-1rem">
          <ion-textarea *ngIf="captureType == 'action'" class="font-white transparent margin-0 width-90 text-align-left" type="text" autoGrow="true" (ionBlur)="assignContent($event)" (keyup.enter)="assignContent($event)" autocapitalize="on" [(ngModel)]="captureContent" placeholder="{{'Define action' | translate}}..." (ionFocus)="ionFocus($event)"></ion-textarea>
          <ion-textarea *ngIf="captureType == 'note'" class="font-white transparent margin-0 width-90 text-align-left" type="text" autoGrow="true" (ionBlur)="assignContent($event)" (keyup.enter)="assignContent($event)" autocapitalize="on" [(ngModel)]="captureContent" placeholder="{{'Define reference' | translate}}..." (ionFocus)="ionFocus($event)"></ion-textarea>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'time' && captureType == 'action'">
        <span class="font-size-1rem font-white">
          {{"Duration" | translate }}
        </span>
        <div class="width-100 margin-top-10 margin-left-50 font-size-1rem">
          <ion-row class="width-100">
            <!-- the 'h' in displayFormat is not a normal h because it would translate it to the hour format, therefore it's a greek letter that looks exactly like an 'h' -->
            <ion-datetime class="font-white no-padding margin-left-10 margin-right-0" displayFormat="m" pickerFormat="m" max="2100" [(ngModel)]="captureTimeISOString" [doneText]="translate.instant('Done')" [cancelText]="translate.instant('Cancel')" (ionBlur)="timeSet()"></ion-datetime><span class="font-white margin-auto-left-3">min</span>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl != 'time' && captureTime  && captureType == 'action'">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('time')">
          <span class="font-size-1rem font-gray">
            {{"Duration" | translate }}
          </span>
        </button>
        <div class="width-100 margin-top-10 margin-left-50 font-size-1rem">
          <ion-row class="width-100">
            <!-- the 'h' in displayFormat is not a normal h because it would translate it to the hour format, therefore it's a greek letter that looks exactly like an 'h' -->
            <ion-datetime class="font-gray" displayFormat="m" pickerFormat="m" max="2100" [(ngModel)]="captureTimeISOString" [doneText]="translate.instant('Done')" [cancelText]="translate.instant('Cancel')" (ionBlur)="timeSet()"></ion-datetime><span class="font-gray margin-auto-left-3">min</span>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'priority'  && captureType == 'action'">
        <span class="font-size-1rem font-white">
          {{"Priority" | translate }}
        </span>
        <div class="width-100 margin-top-10 font-size-1rem">
          <ion-row class="width-100">
            <ion-col>
              <button *ngIf="capturePriority == 0" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignPriority(0)">{{"low" | translate}}
              </button>
              <button *ngIf="capturePriority != 0" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignPriority(0)">{{"low" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="capturePriority == 1" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignPriority(1)">{{"medium" | translate}}
              </button>
              <button *ngIf="capturePriority != 1" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignPriority(1)">{{"medium" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="capturePriority == 2" class="display-inline-block transparent font-white text-align-left width-100" (click)="assignPriority(2)">{{"high" | translate}}
              </button>
              <button *ngIf="capturePriority != 2" class="display-inline-block transparent font-gray text-align-left width-100" (click)="assignPriority(2)">{{"high" | translate}}
              </button>
            </ion-col>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl != 'priority' && capturePriority != undefined  && captureType == 'action'">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('priority')">
          <span class="font-size-1rem font-gray">
            {{"Priority" | translate }}
          </span>
        </button>
        <div class="width-100 margin-top-10 font-size-1rem">
          <ion-row class="width-100">
            <ion-col>
              <button *ngIf="capturePriority == 0" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignPriority(0)">{{"low" | translate}}
              </button>
              <button *ngIf="capturePriority != 0" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignPriority(0)">{{"low" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="capturePriority == 1" class="display-inline-block transparent font-white text-align-center width-100" (click)="assignPriority(1)">{{"medium" | translate}}
              </button>
              <button *ngIf="capturePriority != 1" class="display-inline-block transparent font-gray text-align-center width-100" (click)="assignPriority(1)">{{"medium" | translate}}
              </button>
            </ion-col>
            <ion-col>
              <button *ngIf="capturePriority == 2" class="display-inline-block transparent font-white text-align-left width-100" (click)="assignPriority(2)">{{"high" | translate}}
              </button>
              <button *ngIf="capturePriority != 2" class="display-inline-block transparent font-gray text-align-left width-100" (click)="assignPriority(2)">{{"high" | translate}}
              </button>
            </ion-col>
          </ion-row>
        </div>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'done' && !captureDeadline  && captureType == 'action'  && captureType == 'action'">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="assignDeadline()">
          <span class="font-size-1rem">
            {{"Add deadline" | translate }}
          </span>
        </button>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'done' && captureDeadline && captureType == 'action'">
        <button class="no-padding transparent font-gray text-align-left width-100" (click)="changePageCtrl('done')">
          <span class="font-size-1rem">
            {{"Deadline" | translate }}
          </span>
          <button class="display-inline-block transparent font-gray text-align-left margin-left-50 margin-top-10" (click)="assignDeadline()">{{captureDeadlineText}}
          </button>
          <button class="transparent display-inline-block font-white margin-left-50" (click)="deleteDeadline()">
            {{"Delete" | translate}}
          </button>
        </button>
      </ion-row>
      <ion-row *ngIf="pageCtrl == 'done'" class="margin-top-45">
        <button class="transparent font-gray margin-auto width-100" (click)="processCapture()">
          <img src="../../assets/icon/icon_confirm.png" height="30" class="margin-auto">
        </button>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ProcessTakenActionPage -->
  <div *ngIf="viewpoint=='ProcessTakenActionPage'" class="secondary width-90 border-radius-20px padding-10 margin-top-10">
    <div *ngIf="pageCtrl == ''">
      {{"Please indicate whether you finished the action or want to abort it." | translate }}<br>
      <div class="buttons-flex-container">
        <ion-button class="darkbutton button-left" (click)="actionFinished()">{{"Finished" | translate }}</ion-button>
        <ion-button class="darkbutton button-right" (click)="abortAction()">{{"Abort" | translate }}</ion-button>
      </div>
    </div>

    <div *ngIf="pageCtrl == 'actionAborted'">
      {{"You aborted this action, it has been put back into your actions list." | translate }}
    </div>

    <div *ngIf="pageCtrl == 'actionFinished'">
      {{"Congrats! Is your project now accomplished and can be deleted?" | translate }}
      <div class="buttons-flex-container">
        <ion-button class="darkbutton button-left" (click)="goalFinished()">{{"Accomplished" | translate }}</ion-button>
        <ion-button class="darkbutton button-right" (click)="goalNotFinished()">{{"Not yet" | translate }}</ion-button>
      </div>
    </div>
  </div>

  <!-- ToDoPage -->
  <div class="height-100" *ngIf="viewpoint == 'ToDoPage' && !isApp">
    <div class="height-100" *ngIf="pageCtrl == ''">
      <ion-grid class="height-100">
        <ion-row>
          <ion-col size="4" class="primary flex">
            <form class="flex width-100" (ngSubmit)="showDoableActions()" [formGroup]="giveTimeForm">
              <ion-label class="width-50 margin-auto min-width-175px primary display-inline-block">{{"Time available in minutes" | translate }}:</ion-label>
              <ion-input #TimeAvailable class="width-50 border-bottom-1" type="number" min="0" formControlName="timeEstimate" (ionChange)="showDoableActions()" autofocus="true"></ion-input>
            </form>
          </ion-col>
          <ion-col size="8">
            <ion-item class="border-radius-20px">
            <ion-select multiple [(ngModel)]="goalKeyArray" (ionChange)="chooseGoal($event)" placeholder="{{'All Projects' | translate}}...">
              <ion-label>{{"Project" | translate }}</ion-label>
              <ion-select-option *ngFor="let goal of goalArray" value="{{goal.key}}">{{goal.name}}</ion-select-option>
            </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
          <div class="content-container min-height-150px">
            <ion-grid>
              <ion-row>
                <ion-col size="8">{{"Action" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Project" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Priority" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Time" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Deadline" | translate}}</ion-col>
              </ion-row>
              <ion-row class="background-white margin-bottom-1 border-radius-5px" *ngFor="let action of doableActionArray" (click)="takeThisAction(action)">
                <ion-col size="8">
                  <ion-card class="margin-0 project-color display-inline-block" [ngStyle]="{'background-color': goalDict[action.goalid].color}"></ion-card>
                {{action.content}}
                </ion-col>
                <ion-col size="1" class="text-align-center">{{goalDict[action.goalid].name}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.priority}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.time}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.deadline}}</ion-col>
              </ion-row>
            </ion-grid>
          </div>
        </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ToDoPage -->
  <div class="height-100-minus-70px" *ngIf="viewpoint == 'ToDoPage' && isApp">
    <ion-grid class="height-100 width-90">
      <ion-row class="margin-top-10">
        <ion-col>
        </ion-col>
        <ion-col class="flex">
          <button class="transparent no-padding" (click)="filterToDos()">
            <img src="../../assets/icon/icon_filter.png" height="20">
          </button>
        </ion-col>
        <ion-col class="flex">
          <ion-datetime class="font-gray no-padding margin-auto margin-left-10 margin-right-0" displayFormat="m" pickerFormat="m" max="2100" [(ngModel)]="timeEstimateISOString" [doneText]="translate.instant('Done')" [cancelText]="translate.instant('Cancel')" (ionBlur)="showDoableActions()"></ion-datetime>
          <span class="font-gray margin-auto-left-3">min</span>
        </ion-col>
        <ion-col>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="doableActionArray[0]" class="margin-top-45 margin-auto font-white font-size-1-5rem text-align-center">
        <span class="margin-auto">
          {{doableActionArray[0].content}}
        </span>
      </ion-row>
      <ion-row *ngIf="doableActionArray[0]" class="margin-auto font-gray text-align-center">
        <span class="margin-auto">
          {{goalDict[doableActionArray[0].goalid].name}}
        </span>
      </ion-row>
      <ion-row *ngIf="doableActionArray[0]" class="width-50 margin-top-45 margin-right-auto margin-left-auto">
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto font-white font-size-20px" (click)="skipAction()">
            {{"Next" | translate}}
          </button>
        </ion-col>
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto font-white font-size-20px" (click)="startAction(doableActionArray[0])">
            {{"Go" | translate}}
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ActionPage -->
  <!-- No Desktop ActionPage yet -->
  <!-- Mobile ActionPage -->
  <div class="height-100-minus-70px" *ngIf="viewpoint == 'ActionPage' && isApp">
    <ion-grid class="height-100 width-90">
      <ion-row class="margin-top-45 margin-auto font-white font-size-1-5rem text-align-center">
        <span class="margin-auto">
          {{startedAction.content}}
        </span>
      </ion-row>
      <ion-row class="margin-auto font-gray text-align-center">
        <span class="margin-auto">
          {{goalDict[startedAction.goalid].name}}
        </span>
      </ion-row>
      <ion-row class="margin-top-45 margin-right-auto margin-left-auto">
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto font-white font-size-20px" (click)="stopAction()">
            {{"Cancel" | translate}}
          </button>
        </ion-col>
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto font-white font-size-20px" (click)="finishAction()">
            {{"Done" | translate}}
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- FinishGoalPage -->
  <!-- No Desktop FinishGoalPage yet -->
  <!-- Mobile FinishGoalPage -->
  <div class="height-100-minus-70px" *ngIf="viewpoint == 'FinishGoalPage' && isApp">
    <ion-grid class="height-100 width-90">
      <ion-row class="margin-auto font-gray text-align-center">
        <span class="margin-auto">
          {{"Congrats! Is your project now accomplished and can be deleted?" | translate}}
        </span>
      </ion-row>
      <ion-row class="width-50 margin-top-45 margin-right-auto margin-left-auto">
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto" (click)="goalNotFinished()">
            <img src="../../assets/icon/icon_cancel.png" height="20" class="margin-bottom-3">
          </button>
        </ion-col>
        <ion-col size="6" class="flex text-align-center">
          <button class="transparent no-padding margin-auto" (click)="goalFinished()">
            <img src="../../assets/icon/icon_confirm.png" height="30" class="margin-bottom-3">
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- StopActionPage -->
  <!-- No Desktop StopActionPage yet -->
  <!-- Mobile StopActionPage -->
  <div class="height-100-minus-70px" *ngIf="viewpoint == 'StopActionPage' && isApp">
    <ion-grid class="height-100 width-90">
      <ion-row class="margin-auto font-gray text-align-center">
        <span class="margin-auto">
          {{"Please update the remaining time for this action" | translate}}
        </span>
      </ion-row>
      <ion-row class="margin-auto font-gray text-align-center width-100">
        <span class="font-white margin-top-45 margin-right-auto margin-left-auto flex">
          <ion-datetime class="font-white no-padding display-inline-block" displayFormat="m" pickerFormat="m" max="2100" [(ngModel)]="startedActionTimeISOString" [doneText]="translate.instant('Done')" [cancelText]="translate.instant('Cancel')" (ionBlur)="updateStartedActionTime()"></ion-datetime>
          min
        </span>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ProjectsPage -->
  <div class="height-100" *ngIf="viewpoint == 'ProjectsPage' && !isApp">
    <div *ngIf="pageCtrl == ''">
      <ion-card class="width-18 height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px">
        <ion-item class="border-radius-20px">
          <ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}..."></ion-input>
        </ion-item>

        <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
      </ion-card>
      <ion-card class="width-18 height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px" no-lines *ngFor="let goal of goalArray" (click)="reviewGoal(goal)">
        <ion-grid>
          <ion-row class="max-height-30px margin-bottom-10">
              <h1 class="max-height-30px margin-0 overflow-x-hidden width-90 display-inline-block">{{goal.name}}</h1>
              <ion-card class="margin-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
          </ion-row>
          <ion-row class="overflow-scroll no-scrollbar height-100px">
            <p class="one-line border-top width-100" *ngFor="let action of actions[goal.key]">{{action.content}}</p>
          </ion-row>
        </ion-grid>
      </ion-card>
    </div>
    <div class="height-90" *ngIf="pageCtrl == 'ProjectOverview'">
      <ion-grid class="height-100">
        <ion-row class="height-100">
          <ion-col size="9" class="no-padding height-100">
            <ion-grid class="height-100 no-padding">
              <ion-row class="height-50 overflow-scroll no-scrollbar">
                <ion-col size="4" class="height-100">
                  <ion-card class="overflow-scroll no-scrollbar height-45 margin-top-10 margin-bottom-10 width-100 secondary border-radius-20px">
                    <ion-grid>
                      <ion-row>
                        <ion-col>
                          <h1 class="margin-0">{{goal.name}}</h1>
                        </ion-col>
                        <ion-col>
                          <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                          <ion-button class="darkbutton display-inline-block" (click)="deleteGoal(goal)">
                            {{"Delete" | translate}}
                          </ion-button>
                          <ion-button class="darkbutton display-inline-block" (click)="editGoal(goal)">
                            {{"Edit" | translate}}
                          </ion-button>
                      </ion-row>
                    </ion-grid>
                  </ion-card>
                  <ion-card class="width-100 padding-10 height-50 secondary border-radius-20px margin-top-0">
                    <h1 class="margin-0">{{"Team" | translate }}</h1>
                  </ion-card>
                </ion-col>
                <ion-col size="8" class="height-100 overflow-scroll no-scrollbar">
                  <div class="width-100 margin-top-10 height-100 secondary padding-10 border-radius-20px">
                    <ion-row class="width-100 height-45px">
                      <ion-col class="height-100 text-align-center">
                        <button class="background-transparent" icon-only (click)="changeWeek(-1)" *ngIf="!isApp">
                          <ion-icon class="size-20px" name="arrow-back"></ion-icon>
                        </button>
                        <button class="background-transparent" (click)="changeDate()">
                          <h2 class="display-inline-block margin-0" *ngIf="!isApp">{{ viewTitle }}</h2>
                        </button>
                        <button class="background-transparent" icon-only (click)="changeWeek(1)" *ngIf="!isApp">
                          <ion-icon class="size-20px" name="arrow-forward"></ion-icon>
                        </button>
                      </ion-col>
                    </ion-row>
                    <ion-row class="width-100 height-80">
                      <ng-template #template let-displayEvent="displayEvent">
                        <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
                      </ng-template>
                      <calendar [eventSource]="eventSource"
                                [calendarMode]="calendar.mode"
                                [currentDate]="calendar.currentDate"
                                (onEventSelected)="onEventSelected($event)"
                                (onTitleChanged)="onViewTitleChanged($event)"
                                (onTimeSelected)="onTimeSelected($event)"
                                step="5"
                                class="calendar height-100"
                                autoSelect="false"
                                [weekviewNormalEventTemplate]="template"
                                [weekviewAllDayEventTemplate]="template"
                                [dayviewNormalEventTemplate]="template"
                                [dayviewAllDayEventTemplate]="template"
                                scrollToHour="8"
                                [locale]="translate.currentLang"
                                formatHourColumn="{{'formatHourColumn' | translate }}"
                                formatWeekTitle="{{'formatWeekTitle' | translate }}"
                                formatDayTitle="{{'formatDayTitle' | translate }}"
                                startingDayWeek="1"
                                allDayLabel="{{'Deadlines' | translate }}">
                      </calendar>
                    </ion-row>
                  </div>
                </ion-col>
              </ion-row>
              <ion-row class="height-50 margin-5">
                <ion-card class="margin-top-10 width-100 height-100 secondary border-radius-20px">
                  <ion-grid class="height-100">
                    <ion-row class="height-100">
                      <ion-col class="border-right height-100 overflow-scroll no-scrollbar">
                        <ion-buttons class="height-13" start>
                          <h1 class="display-inline-block margin-right-10">{{"Actions" | translate }}</h1>
                          <ion-button class="darkbutton" icon-only (click)="addAction(goal, '')">
                            <ion-icon name="add"></ion-icon>
                          </ion-button>
                        </ion-buttons>
                        <ion-card class="height-80 overflow-scroll no-scrollbar">
                          <button class="block width-100 no-padding" *ngFor="let nextAction of actionArray" (click)="reviewAction(nextAction)">
                            <p class="border-top">{{nextAction.content}}</p>
                          </button>
                        </ion-card>
                      </ion-col>
                      <ion-col class="border-right height-100 overflow-scroll no-scrollbar">
                        <ion-buttons class="height-13" start>
                          <h1 class="display-inline-block margin-right-10">{{"Delegations" | translate }}</h1>
                          <ion-button class="darkbutton" icon-only (click)="addDelegation(goal,'')">
                            <ion-icon name="add"></ion-icon>
                          </ion-button>
                        </ion-buttons>
                        <ion-card class="height-80 overflow-scroll no-scrollbar">
                          <button class="block width-100 no-padding" *ngFor="let delegation of delegationArray" (click)="reviewDelegation(delegation)">
                            <p class="border-top">{{delegation.content}}</p>
                          </button>
                        </ion-card>
                      </ion-col>
                      <ion-col class="height-100 overflow-scroll no-scrollbar">
                        <ion-buttons class="height-13" start>
                          <h1 class="display-inline-block margin-right-10">{{"References" | translate }}</h1>
                          <ion-button class="darkbutton" icon-only (click)="addReference(goal,'')">
                            <ion-icon name="add"></ion-icon>
                          </ion-button>
                        </ion-buttons>
                        <ion-card class="height-80 overflow-scroll no-scrollbar">
                          <button class="block width-100 no-padding" *ngFor="let reference of referenceArray" (click)="reviewReference(reference)">
                            <p class="border-top">{{reference.content}}</p>
                          </button>
                        </ion-card>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-card>
              </ion-row>
            </ion-grid>
          </ion-col>
          <ion-col size="3">
            <ion-card class="width-100 height-100 padding-10 secondary border-radius-20px margin-top-10">
              <h1 class="margin-0">{{"Chat" | translate }}</h1>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ProjectsPage-->
  <div class="height-100-minus-70px width-100" *ngIf="viewpoint == 'ProjectsPage' && isApp">
    <div *ngIf="pageCtrl == ''" class="height-100 no-scrollbar overflow-scroll">
      <ion-card class="width-90 margin-auto transparent">
        <ion-row class="width-90 margin-left-auto margin-right-auto">
          <ion-col size="9.6" class="no-padding">
            <ion-input class="transparent display-inline-block margin-0 width-90 placeholder-white border-bottom-1" type="text" (ionFocus)="ionFocus($event)" (keyup.enter)="addGoal(goalname)" autocapitalize="on" [(ngModel)]="goalname" placeholder="{{'Define new goal' | translate}}..."></ion-input>
          </ion-col>
          <ion-col size="1.2" class="flex text-align-center no-padding">
            <button class="transparent no-padding" (click)="addGoal(goalname)">
              <img src="../../assets/icon/icon_confirm.png" height="15">
            </button>
          </ion-col>
        </ion-row>
      </ion-card>
      <ion-card class="width-90 margin-top-10 overflow-y-hidden overflow-x-hidden text-align-center margin-auto transparent" no-lines *ngFor="let goal of goalArray" (click)="reviewGoal(goal)">
        <ion-grid>
          <ion-row class="height-45px">
            <ion-col size="1.5" class="flex">
              <ion-card class="margin-auto project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
            </ion-col>
            <ion-col size="10.5" class="text-align-left">
              <h1 class="one-line max-height-30px margin-0 margin-auto overflow-x-hidden overflow-y-hidden width-90 font-white">{{goal.name}}</h1>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="1.5">
            </ion-col>
            <ion-col size="10.5">
              <p class="margin-0 one-line width-100 overflow-x-hidden font-gray" *ngFor="let action of actions[goal.key] | slice:0:4">- {{action.content}}</p>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card>
    </div>
    <div class="height-100 width-100 no-scrollbar overflow-scroll" *ngIf="pageCtrl == 'ProjectOverview'">
      <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 transparent">
        <ion-grid>
          <ion-row>
            <ion-col size="1.5" class="flex">
              <ion-card class="margin-auto project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
            </ion-col>
            <ion-col size="10.5" class="text-align-left">
              <h1 class="margin-0 margin-auto overflow-x-hidden overflow-y-hidden width-90 font-white font-size-50px">{{goal.name}}</h1>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="font-white">
              <button class="transparent font-white font-size-30px" (click)="deleteGoal(goal)">
                {{"Delete" | translate}}
              </button>
            </ion-col>
            <ion-col class="font-white">
              <button class="transparent font-white font-size-30px" (click)="editGoal(goal)">
                {{"Edit" | translate}}
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card>
      <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 transparent">
        <ion-row>
          <ion-col size="9">
            <h1 class="display-inline-block font-white margin-0 margin-right-10 font-size-30px">{{"Actions" | translate }}</h1>
          </ion-col>
          <ion-col size="3" class="flex no-padding">
            <button class="transparent no-padding margin-auto" (click)="goToProcessCapturePage('', goal, 'action')">
              <img src="../../assets/icon/icon_add.png" class="img-height-30px img-width-30px">
            </button>
          </ion-col>
        </ion-row>
        <button class="block width-100 no-padding transparent margin-bottom-3" *ngFor="let nextAction of actionArray" (click)="reviewAction(nextAction)">
          <p class="font-gray margin-0 margin-left-10 margin-bottom-3 font-size-15px">- {{nextAction.content}}</p>
        </button>
      </ion-card>
      <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 transparent">
        <ion-row>
          <ion-col size="9">
            <h1 class="display-inline-block font-white margin-0 margin-right-10 font-size-30px">{{"References" | translate }}</h1>
          </ion-col>
          <ion-col size="3" class="flex no-padding">
            <button class="transparent no-padding float-right margin-auto"  (click)="goToProcessCapturePage('', goal, 'note')">
              <img src="../../assets/icon/icon_add.png" class="img-width-30px img-height-30px">
            </button>
          </ion-col>
        </ion-row>
        <button class="block width-100 no-padding transparent font-size-15px margin-bottom-3" *ngFor="let reference of referenceArray" (click)="reviewReference(reference)">
          <p class="font-gray margin-0 margin-left-10 margin-bottom-3">- {{reference.content}}</p>
        </button>
      </ion-card>
      <ion-card class="margin-0 height-100 padding-10 margin-bottom-10 width-100 transparent">
        <ion-row class="width-100 text-align-right margin-botto-3">
          <button *ngIf="calendar.mode == 'month'" class="transparent no-padding font-white margin-auto font-size-15px" (click)="changeCalendarMode('day')">
            {{"Day view" | translate}}
          </button>
          <button *ngIf="calendar.mode == 'day'" class="transparent no-padding font-white margin-auto font-size-15px" (click)="changeCalendarMode('month')">
            {{"Month view" | translate}}
          </button>
        </ion-row>
        <ion-row class="width-100 text-align-center margin-bottom-10">
          <span class="margin-auto">
            <button *ngIf="calendar.mode == 'day'" class="transparent no-padding" (click)="changeDay(-1)">
              <img src="../../assets/icon/icon_arrow_left.png" class="img-height-30px img-width-30px">
            </button>
            <button *ngIf="calendar.mode == 'month'" class="transparent no-padding" (click)="changeDay(-31)">
              <img src="../../assets/icon/icon_arrow_left.png" class="img-height-30px img-width-30px">
            </button>
            <button class="background-transparent font-white" (click)="changeDate()">
              <h3 class="display-inline-block margin-0 font-size-30px">{{ viewTitle }}</h3>
            </button>
            <button *ngIf="calendar.mode == 'day'" class="transparent no-padding" (click)="changeDay(1)">
              <img src="../../assets/icon/icon_arrow_right.png" class="img-height-30px img-width-30px">
            </button>
            <button *ngIf="calendar.mode == 'month'" class="transparent no-padding" (click)="changeDay(31)">
              <img src="../../assets/icon/icon_arrow_right.png" class="img-height-30px img-width-30px">
            </button>
          </span>
        </ion-row>
        <ion-row class="width-100 height-85">
          <div class="width-100 padding-10 height-90" *ngIf="calendar.mode == 'month'">
            <ng-template #template let-showEventDetail="showEventDetail" let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel" [ngStyle]="{'background-color': '#000000'}">
              <ion-grid class="event-detail-container transparent" *ngIf="showEventDetail">
                    <ion-row *ngFor="let event of selectedDate?.events" (click)="onEventSelected(event)" class="transparent height-auto">
                            <span *ngIf="!event.allDay" class="monthview-eventdetail-timecolumn font-size-20px font-white width-100">{{event.startTime|date: 'HH:mm'}}
                                -
                                {{event.endTime|date: 'HH:mm'}}
                            </span>
                        <span *ngIf="event.allDay" class="monthview-eventdetail-timecolumn font-size-20px font-white">{{allDayLabel}}</span>
                        <span class="event-detail font-size-20px font-white">  |  {{event.title}}</span>
                    </ion-row>
                    <ion-row *ngIf="selectedDate?.events.length==0" class="transparent">
                        <div class="no-events-label font-size-20px font-white">{{noEventsLabel}}</div>
                    </ion-row>
                </ion-grid>
            </ng-template>
            <calendar [eventSource]="eventSource"
                      [calendarMode]="calendar.mode"
                      [currentDate]="calendar.currentDate"
                      (onEventSelected)="onEventSelected($event)"
                      (onTitleChanged)="onViewTitleChanged($event)"
                      (onTimeSelected)="onTimeSelected($event)"
                      step="5"
                      class="calendar height-100"
                      autoSelect="false"
                      [weekviewNormalEventTemplate]="template"
                      [weekviewAllDayEventTemplate]="template"
                      [dayviewNormalEventTemplate]="template"
                      [dayviewAllDayEventTemplate]="template"
                      [monthviewEventDetailTemplate]="template"
                      scrollToHour="8"
                      [locale]="translate.currentLang"
                      formatHourColumn="{{'formatHourColumn' | translate }}"
                      formatWeekTitle="{{'formatWeekTitle' | translate }}"
                      formatDayTitle="{{'formatDayTitle' | translate }}"
                      startingDayWeek="1"
                      allDayLabel="{{'Deadlines' | translate }}">
            </calendar>
          </div>
          <div class="width-100 padding-10 height-90" *ngIf="calendar.mode == 'day'">
            <ng-template #template let-displayEvent="displayEvent">
              <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
            </ng-template>
            <calendar [eventSource]="eventSource"
                      [calendarMode]="calendar.mode"
                      [currentDate]="calendar.currentDate"
                      (onEventSelected)="onEventSelected($event)"
                      (onTitleChanged)="onViewTitleChanged($event)"
                      (onTimeSelected)="onTimeSelected($event)"
                      step="5"
                      class="calendar height-100"
                      autoSelect="false"
                      [weekviewNormalEventTemplate]="template"
                      [weekviewAllDayEventTemplate]="template"
                      [dayviewNormalEventTemplate]="template"
                      [dayviewAllDayEventTemplate]="template"
                      [monthviewEventDetailTemplate]="template"
                      scrollToHour="8"
                      [locale]="translate.currentLang"
                      formatHourColumn="{{'formatHourColumn' | translate }}"
                      formatWeekTitle="{{'formatWeekTitle' | translate }}"
                      formatDayTitle="{{'formatDayTitle' | translate }}"
                      startingDayWeek="1"
                      allDayLabel="{{'Deadlines' | translate }}">
            </calendar>
          </div>
        </ion-row>
      </ion-card>
    <!--
      <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 transparent">
        <h1>{{"Team" | translate }}</h1>
      </ion-card>
      <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 transparent">
        <h1>{{"Chat" | translate }}</h1>
      </ion-card>
    -->
    </div>
  </div>

  <!-- CalendarPage -->
  <div class="height-90 width-90 margin-top-10 secondary border-radius-20px" *ngIf="viewpoint == 'CalendarPage' && !isApp">
    <ion-row class="width-100 height-45px">
      <ion-col size="1">
        <ion-buttons start>
          <ion-button class="darkbutton" icon-only (click)="addEvent()">
            <ion-icon name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-col>
      <ion-col class="text-align-center">
        <button class="background-transparent" icon-only (click)="changeWeek(-1)">
          <ion-icon class="size-20px" name="arrow-back"></ion-icon>
        </button>
        <button class="background-transparent" (click)="changeDate()">
          <h2 class="display-inline-block margin-0" *ngIf="!isApp">{{ viewTitle }}</h2>
        </button>
        <button class="background-transparent" icon-only (click)="changeWeek(1)">
          <ion-icon class="size-20px" name="arrow-forward"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
    <ion-row class="width-100 height-85">
      <div class="width-100 padding-10 height-90">
        <ng-template #template let-displayEvent="displayEvent">
          <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
        </ng-template>
        <calendar [eventSource]="eventSource"
                  [calendarMode]="calendar.mode"
                  [currentDate]="calendar.currentDate"
                  (onEventSelected)="onEventSelected($event)"
                  (onTitleChanged)="onViewTitleChanged($event)"
                  (onTimeSelected)="onTimeSelected($event)"
                  step="5"
                  class="calendar height-100"
                  autoSelect="false"
                  [weekviewNormalEventTemplate]="template"
                  [weekviewAllDayEventTemplate]="template"
                  [dayviewNormalEventTemplate]="template"
                  [dayviewAllDayEventTemplate]="template"
                  scrollToHour="8"
                  [locale]="translate.currentLang"
                  formatHourColumn="{{'formatHourColumn' | translate }}"
                  formatWeekTitle="{{'formatWeekTitle' | translate }}"
                  formatDayTitle="{{'formatDayTitle' | translate }}"
                  startingDayWeek="1"
                  allDayLabel="{{'Deadlines' | translate }}">
        </calendar>
      </div>
    </ion-row>
  </div>
  <!-- Mobile CalendarPage -->
  <div class="height-100-minus-70px width-90 margin-auto margin-top-10 border-radius-20px" *ngIf="viewpoint == 'CalendarPage' && isApp">
    <ion-row class="width-100 text-align-right">
      <ion-col size="10" class="text-align-center">
        <button *ngIf="calendar.mode == 'month'" class="transparent no-padding font-white margin-auto margin-bottom-10" (click)="changeCalendarMode('day')">
          {{"Day view" | translate}}
        </button>
        <button *ngIf="calendar.mode == 'day'" class="transparent no-padding font-white margin-auto margin-bottom-10" (click)="changeCalendarMode('month')">
          {{"Month view" | translate}}
        </button>
      </ion-col>
      <ion-col size="2">
        <button class="transparent font-white no-padding" (click)="addEvent()">
          <img src="../../assets/icon/icon_add.png" height="30">
        </button>
      </ion-col>
    </ion-row>
    <ion-row class="width-100 height-45px text-align-center">
      <span class="margin-auto">
        <button *ngIf="calendar.mode == 'day'" class="transparent no-padding" (click)="changeDay(-1)">
          <img src="../../assets/icon/icon_arrow_left.png" height="30">
        </button>
        <button *ngIf="calendar.mode == 'month'" class="transparent no-padding" (click)="changeDay(-31)">
          <img src="../../assets/icon/icon_arrow_left.png" height="30">
        </button>
        <button class="background-transparent font-white no-padding line-height-1" (click)="changeDate()">
          <h3 class="display-inline-block margin-0 font-size-30px">{{ viewTitle }}</h3>
        </button>
        <button *ngIf="calendar.mode == 'day'" class="transparent no-padding" (click)="changeDay(1)">
          <img src="../../assets/icon/icon_arrow_right.png" height="30">
        </button>
        <button *ngIf="calendar.mode == 'month'" class="transparent no-padding" (click)="changeDay(31)">
          <img src="../../assets/icon/icon_arrow_right.png" height="30">
        </button>
      </span>
    </ion-row>
    <ion-row class="width-100 height-85">
      <div class="width-100 padding-10 height-90" *ngIf="calendar.mode == 'month'">
        <ng-template #template let-showEventDetail="showEventDetail" let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel" [ngStyle]="{'background-color': '#000000'}">
          <ion-grid class="event-detail-container transparent" *ngIf="showEventDetail">
                <ion-row *ngFor="let event of selectedDate?.events" (click)="onEventSelected(event)" class="transparent height-auto">
                        <span *ngIf="!event.allDay" class="monthview-eventdetail-timecolumn font-size-20px font-white width-100">{{event.startTime|date: 'HH:mm'}}
                            -
                            {{event.endTime|date: 'HH:mm'}}
                        </span>
                    <span *ngIf="event.allDay" class="monthview-eventdetail-timecolumn font-size-20px font-white">{{allDayLabel}}</span>
                    <span class="event-detail font-size-20px font-white">  |  {{event.title}}</span>
                </ion-row>
                <ion-row *ngIf="selectedDate?.events.length==0" class="transparent">
                    <div class="no-events-label font-size-20px font-white">{{noEventsLabel}}</div>
                </ion-row>
            </ion-grid>
        </ng-template>
        <calendar [eventSource]="eventSource"
                  [calendarMode]="calendar.mode"
                  [currentDate]="calendar.currentDate"
                  (onEventSelected)="onEventSelected($event)"
                  (onTitleChanged)="onViewTitleChanged($event)"
                  (onTimeSelected)="onTimeSelected($event)"
                  step="5"
                  class="calendar height-100"
                  autoSelect="false"
                  [weekviewNormalEventTemplate]="template"
                  [weekviewAllDayEventTemplate]="template"
                  [dayviewNormalEventTemplate]="template"
                  [dayviewAllDayEventTemplate]="template"
                  [monthviewEventDetailTemplate]="template"
                  scrollToHour="8"
                  [locale]="translate.currentLang"
                  formatHourColumn="{{'formatHourColumn' | translate }}"
                  formatWeekTitle="{{'formatWeekTitle' | translate }}"
                  formatDayTitle="{{'formatDayTitle' | translate }}"
                  startingDayWeek="1"
                  allDayLabel="{{'Deadlines' | translate }}">
        </calendar>
      </div>
      <div class="width-100 padding-10 height-90" *ngIf="calendar.mode == 'day'">
        <ng-template #template let-displayEvent="displayEvent" >
          <div class="calendar-event-inner font-black" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
        </ng-template>
        <calendar [eventSource]="eventSource"
                  [calendarMode]="calendar.mode"
                  [currentDate]="calendar.currentDate"
                  (onEventSelected)="onEventSelected($event)"
                  (onTitleChanged)="onViewTitleChanged($event)"
                  (onTimeSelected)="onTimeSelected($event)"
                  step="5"
                  class="calendar height-100"
                  autoSelect="false"
                  [weekviewNormalEventTemplate]="template"
                  [weekviewAllDayEventTemplate]="template"
                  [dayviewNormalEventTemplate]="template"
                  [dayviewAllDayEventTemplate]="template"
                  [monthviewEventDetailTemplate]="template"
                  scrollToHour="8"
                  [locale]="translate.currentLang"
                  formatHourColumn="{{'formatHourColumn' | translate }}"
                  formatWeekTitle="{{'formatWeekTitle' | translate }}"
                  formatDayTitle="{{'formatDayTitle' | translate }}"
                  startingDayWeek="1"
                  allDayLabel="{{'Deadlines' | translate }}">
        </calendar>
      </div>
    </ion-row>
  </div>

  <ion-card class="width-100 height-70px margin-0 no-padding">
      <ion-row class="width-100 height-100">
        <ion-col class="no-padding">
          <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToProcessPage()">
            <ion-row>
            <img src="../../assets/icon/icon_organize.png" class="img-height-30px img-width-30px margin-auto margin-bottom-3">
            </ion-row>
            <ion-row class="font-white">
              <span class="margin-auto">
                {{"Organize" | translate}}
              </span>
            </ion-row>
          </button>
        </ion-col>
        <ion-col class="no-padding">
          <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToToDoPage()">
            <ion-row>
            <img src="../../assets/icon/icon_organize.png" class="img-height-30px img-width-30px margin-auto margin-bottom-3">
            </ion-row>
            <ion-row class="font-white">
              <span class="margin-auto">
                {{"Do" | translate}}
              </span>
            </ion-row>
          </button>
        </ion-col>
      </ion-row>
    </ion-card>


</ion-content>
