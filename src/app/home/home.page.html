<ion-header>
	<ion-toolbar>
    <div *ngIf="loggedin">
  		<div *ngIf="isApp">
        <ion-buttons start>
          <button ion-button icon-only menuToggle>
            <ion-icon name="menu" color="white"></ion-icon>
          </button>
        </ion-buttons>
      </div>
      <div class="header-container" *ngIf="!isApp">
        	<button class="header-icon" (click)="goToCapturePage()">
        		<img class="header-logo" src="../../assets/icon/logo_schriftzug_weiss.png" height="60">
      	</button>
  	    <div class="header-icons-div">
  	      <button class="header-icon" (click)="goToCalendarPage()">
  	        <img src="../../assets/icon/icon_calendar.png" height="20"> {{"Calendar" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToToDoPage()">
  	        <img src="../../assets/icon/icon_todo.png" height="20"> {{"ToDo" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToProjectsPage()">
  	        <img src="../../assets/icon/icon_projects.png" height="20"> {{"Projects" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToCapturePage()">
  	        <img src="../../assets/icon/icon_captures.png" height="20"> {{"Captures" | translate }}
  	      </button>
  	      <button class="header-icon" (click)="goToSettingsPage()">
  	        <!--<img src="../../assets/icon/icon_captures.png" height="20">--> {{"Settings" | translate }}
  	      </button>
  	    </div>
    	</div>
    </div>
	</ion-toolbar>
</ion-header>

<ion-content color="primary">

  <span class="font-white">{{errorMsg | translate}}</span>

  <!-- LoginPage -->
	<div *ngIf="viewpoint == 'LoginPage'">
		<ion-card class="secondary">
			<div *ngIf="pageCtrl == ''">
				<form (ngSubmit)="login()" [formGroup]="loginForm">
					<ion-list inset>
						<ion-item no-lines>
							<ion-input type="text" placeholder="{{'Email' | translate }}" formControlName="email"></ion-input>
						</ion-item>
						<ion-item no-lines>
							<ion-input type="password" placeholder="{{'Password' | translate }}" formControlName="password"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal>
						<div class="form-error">{{loginError}}</div>
						<ion-button expand="block" type="submit" [disabled]="!loginForm.valid">{{"Log in" | translate }}</ion-button>			
					</div>
				</form>
				<ion-list>
					<ion-button icon-left class="signInButton" (click)="goToSignUp()">
						<ion-icon name="person-add"></ion-icon>
						{{"Sign up" | translate }}
					</ion-button>
					<ion-button icon-left class="signInButton" (click)="goToForgotPassword()">
						{{"Forgot password" | translate }}
					</ion-button>
				</ion-list>
			</div>
			<div *ngIf="pageCtrl == 'forgotPassword'">
				<form (ngSubmit)="resetPassword()" [formGroup]="forgotPasswordForm">
					<ion-list inset>
						<ion-item no-lines>
							<ion-input type="text" placeholder="{{'Email' | translate }}" formControlName="email"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal>
						<ion-button expand="block" type="submit" [disabled]="!forgotPasswordForm.valid">{{"Reset password" | translate }}</ion-button>			
					</div>
				</form>
			</div>
			<div *ngIf="pageCtrl == 'signUp'">
				<form (ngSubmit)="signUp()" [formGroup]="signUpForm">
					<ion-list inset>
						<ion-item no-lines>
							<ion-input type="text" placeholder="{{'Email' | translate }}" formControlName="email"></ion-input>
						</ion-item>

						<ion-item no-lines>
							<ion-input type="password" placeholder="{{'Password' | translate }}" formControlName="password"></ion-input>
						</ion-item>
					</ion-list>
					<div padding-horizontal>
						<div class="form-error">{{signupError}}</div>

						<ion-button expand="block" type="submit" [disabled]="!signUpForm.valid">{{"Sign up" | translate }}</ion-button>
					</div>
				</form>
			</div>
		</ion-card>
	</div>

  <!-- SettingsPage -->
  <div class="margin-top-10 width-90 padding-10 secondary border-radius-20px height-90" *ngIf="viewpoint == 'SettingsPage'">
    <ion-button class="darkbutton width-auto" (click)="logout()">{{"Logout" | translate}}</ion-button>
  </div>

	<!-- CapturePage -->
  <div *ngIf="viewpoint == 'CapturePage'">
    <ion-row class="margin-auto height-20" *ngIf="isApp">
      <ion-card class="text-align-center height-40 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-150px">
        <ion-item class="height-50 border-radius-20px">
          <ion-input type="text" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}"></ion-input>
        </ion-item>
        <ion-button class="darkbutton width-auto" (click)="addCapture(newCapture)">{{"Add" | translate}}</ion-button>
      </ion-card>
    </ion-row>
    <ion-row class="width-40 margin-auto margin-top-10 height-20" *ngIf="!isApp">
      <ion-card class="margin-top-10 width-100 text-align-center height-40 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-150px">
        <ion-item class="height-50 border-radius-20px">
          <ion-input type="text" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}"></ion-input>
        </ion-item>
        <ion-button class="darkbutton width-auto" (click)="addCapture(newCapture)">{{"Add" | translate}}</ion-button>
      </ion-card>
    </ion-row>
    <div *ngIf="takenActionListNotEmpty || captureListNotEmpty" class="secondary border-radius-20px width-90 margin-top-10 padding-bottom-10">
      <div *ngIf="takenActionListNotEmpty">
        <h3 class="padding-left-20">{{"Taken actions ready for processing" | translate}}:</h3>
        <button class="border-bottom-1 padding-left-20 padding-top-10" *ngFor="let takenAction of takenActionArray" (click)="goToProcessTakenActionPage(takenAction)">{{"You started with action" |translate}} "{{takenAction.content}}" {{", click here to process" | translate }}
        </button>
      </div>
      <div *ngIf="captureListNotEmpty">
      <h3 class="padding-left-20">{{"Thoughts captured and ready for processing" | translate}}:</h3>
      <ion-grid>
        <ion-row class="border-bottom-1 padding-left-20 width-100 min-height-30px" *ngFor="let capture of captureArray">
        <ion-col size="11" class="height-100">
          <button (click)="goToProcessCapturePage(capture)">{{capture.content}}
          </button>
        </ion-col>
        <ion-col size="1" class="height-100">
          <button float-right (click)="deleteCapture(capture)">{{ "Delete" | translate }}</button>
        </ion-col>
      </ion-row>
      </ion-grid>
      </div>
    </div>
  </div>

  <!-- ProcessCapturePage -->
  <div *ngIf="viewpoint=='ProcessCapturePage'">
    <div *ngIf="!isApp" class="height-100">
      <div *ngIf="pageCtrl == ''">
        <ion-grid>
          <ion-row class="width-100">
            <ion-col size="3">
              <ion-card class="width-100 margin-top-0 secondary border-radius-20px text-align-center overflow-y-scroll no-scrollbar">
                <div class="height-100 width-100 max-height-500px margin-vertical-center-parent overflow-y-scroll no-scrollbar">
                <p class="width-100 margin-10px overflow-y-scroll no-scrollbar text-align-center">{{capture.content}}</p>
              
              </div>
              <ion-button class="darkbutton display-block" (click)="deleteCapture(capture)">{{ "Delete" | translate }}</ion-button>
              </ion-card>
              <ion-card class="text-align-center margin-top-10 overflow-scroll no-scrollbar width-100 margin-left-0 display-inline-block secondary border-radius-20px">
                <ion-item class="border-radius-20px">
                  <ion-input type="text" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}"></ion-input>
                </ion-item>
                <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
              </ion-card>
            </ion-col>
            <ion-col>
              
              
              <ion-card class="max-width-400px overflow-x-hidden text-align-center width-auto margin-top-0 height-20 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-100px" no-lines *ngFor="let goal of goalArray">
                <ion-grid>
                  <ion-row>
                    <ion-col size="10">
                      <h1 class="max-height-30px margin-0 overflow-x-hidden width-90">{{goal.name}}</h1>
                    </ion-col>
                    <ion-col>
                      <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                
                <ion-button class="darkbutton button-left" (click)="addAction(goal, capture)">{{"Action" | translate }}</ion-button>
                <ion-button class="darkbutton button-left" (click)="addDelegation(goal, capture)">{{"Delegation" | translate }}</ion-button>
                <ion-button class="darkbutton button-left" (click)="addReference(goal, capture)">{{"Reference" | translate }}</ion-button>
                  </ion-row>
                </ion-grid>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>

    <!-- mobile -->
    <div *ngIf="isApp" class="height-100">
      <div *ngIf="pageCtrl == ''">
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px text-align-center">
          <div class="max-height-500px margin-vertical-center-parent overflow-y-scroll no-scrollbar">
            <p class="width-100 margin-10px overflow-y-scroll no-scrollbar text-align-center">{{capture.content}}</p>
          </div>
          <ion-button class="darkbutton display-block" (click)="deleteCapture(capture)">{{ "Delete" | translate }}</ion-button>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ion-item class="border-radius-20px">
            <ion-input type="text" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}"></ion-input>
          </ion-item>
          <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px" no-lines *ngFor="let goal of goalArray">
          <ion-grid>
            <ion-row>
              <ion-col size="10">
                <h1 class="max-height-30px overflow-x-hidden width-90">{{goal.name}}</h1>
              </ion-col>
              <ion-col>
                <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
              </ion-col>
            </ion-row>
            <ion-row>
          
          <ion-button class="darkbutton button-left width-18" (click)="addAction(goal, capture)">{{"Action" | translate }}</ion-button>
          <ion-button class="darkbutton button-left" (click)="addDelegation(goal, capture)">{{"Delegation" | translate }}</ion-button>
          <ion-button class="darkbutton button-left" (click)="addReference(goal, capture)">{{"Reference" | translate }}</ion-button>
            </ion-row>
          </ion-grid>
        </ion-card>
      </div>
    </div>
  </div>

  <!-- ProcessTakenActionPage -->
  <div *ngIf="viewpoint=='ProcessTakenActionPage'" class="primary">
    <div *ngIf="pageCtrl == ''">
      {{"Please indicate whether you finished the action or want to abort it." | translate }}<br>
      <div class="buttons-flex-container">
        <ion-button class="darkbutton button-left" (click)="actionFinished()">{{"Finished" | translate }}</ion-button>
        <ion-button class="darkbutton button-right" (click)="abortAction()">{{"Abort" | translate }}</ion-button>
      </div>
    </div>

    <div *ngIf="pageCtrl == 'actionAborted'">
      {{"You aborted this action, it has been put back into your actions list." | translate }}
    </div>

    <div *ngIf="pageCtrl == 'actionFinished'">
      {{"Congrats! Is your project now accomplished and can be deleted?" | translate }}
      <div class="buttons-flex-container">
        <ion-button class="darkbutton button-left" (click)="goalFinished()">{{"Accomplished" | translate }}</ion-button>
        <ion-button class="darkbutton button-right" (click)="goalNotFinished()">{{"Not yet" | translate }}</ion-button>
      </div>
    </div>

    <div *ngIf="pageCtrl == 'goalFinished'">
      {{"Congratulations to finishing your goal! Now let's head on to achieving the next ones!" | translate }}
    </div>
  </div>

  <!-- ToDoPage -->
    <div class="height-100" *ngIf="viewpoint == 'ToDoPage'">
      <div class="height-100" *ngIf="pageCtrl == ''">
        <ion-grid class="height-100">
          <ion-row>
            <ion-col size="4" class="primary flex">
              <form class="flex width-100" (ngSubmit)="showDoableActions()" [formGroup]="giveTimeForm">
                <ion-label class="width-50 margin-auto min-width-175px primary display-inline-block">{{"Time available in minutes" | translate }}:</ion-label>
                <ion-input #TimeAvailable class="width-50" type="number" min="0" formControlName="timeEstimate" (ionChange)="showDoableActions()" autofocus="true"></ion-input>
              </form>
            </ion-col>
            <ion-col size="8">
              <ion-item class="border-radius-20px">
              <ion-select [(ngModel)]="goal.key" (ionChange)="chooseGoal($event)">
                <ion-label>{{"Project" | translate }}</ion-label>
                <ion-select-option selected value="None">{{"All Projects" | translate }}</ion-select-option>
                <ion-select-option *ngFor="let goal of goalArray" value="{{goal.key}}">{{goal.name}}</ion-select-option>
              </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row class="height-100">
            <ion-col>
            <div class="content-container height-100">
              <ion-grid *ngIf="!isApp">
                <ion-row>
                  <ion-col size="8">{{"Action" | translate}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{"Project" | translate}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{"Priority" | translate}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{"Time" | translate}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{"Deadline" | translate}}</ion-col>
                </ion-row>
                <ion-row class="background-white margin-bottom-1 border-radius-5px" *ngFor="let action of doableActionArray" (click)="takeThisAction(action)">
                  <ion-col size="8">{{action.content}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{goalDict[action.goalid].name}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{action.priority}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{action.time}}</ion-col>
                  <ion-col size="1" class="text-align-center">{{action.deadline}}</ion-col>
                </ion-row>
              </ion-grid>
              <ion-grid *ngIf="isApp">
                <ion-row>
                  <ion-col size="8">{{"Action" | translate}}</ion-col>
                  <ion-col size="4" class="text-align-center">{{"Time" | translate}}</ion-col>
                </ion-row>
                <ion-row class="background-white margin-bottom-1 border-radius-5px" *ngFor="let action of doableActionArray" (click)="takeThisAction(action)">
                  <ion-col size="8">{{action.content}}</ion-col>
                  <ion-col size="4" class="text-align-center">{{action.time}}</ion-col>
                </ion-row>
              </ion-grid>
            </div>
          </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>

  <!-- ProjectsPage -->
  <div class="height-100" *ngIf="viewpoint == 'ProjectsPage'">
    <div *ngIf="!isApp" class="height-100">
      <div *ngIf="pageCtrl == ''">
        <ion-card class="width-18 height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px">
          <ion-item class="border-radius-20px">
            <ion-input type="text" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}"></ion-input>
          </ion-item>

          <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
        </ion-card>
        <ion-card class="width-18 height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px" no-lines *ngFor="let goal of goalArray" (click)="reviewGoal(goal)">
          <ion-grid>
            <ion-row>
              <ion-col size="9">
                <h1 class="max-height-30px overflow-x-hidden width-90">{{goal.name}}</h1>
              </ion-col>
              <ion-col>
                <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
              </ion-col>
            </ion-row>
            <ion-row>
              <p class="one-line border-top width-100 overflow-x-hidden" *ngFor="let action of actions[goal.key]">{{action.content}}</p>
            </ion-row>
          </ion-grid>
        </ion-card>
      </div>


      <div class="height-100" *ngIf="pageCtrl == 'ProjectOverview'">
        <ion-grid class="height-100">
          <ion-row class="height-100">
            <ion-col size="9" class="no-padding">
              <ion-grid class="height-100 no-padding">
                <ion-row class="height-50">
                  <ion-col size="4">
                    <ion-card class="height-45 margin-top-10 margin-bottom-10 width-100 secondary border-radius-20px">
                      <ion-grid>
                        <ion-row>
                          <ion-col size="10">
                            <h1 class="margin-0">{{goal.name}}</h1>
                          </ion-col>
                          <ion-col>
                            <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-button class="darkbutton display-inline-block" (click)="deleteGoal(goal)">
                              {{"Delete" | translate}}
                            </ion-button>
                            <ion-button class="darkbutton display-inline-block" (click)="editGoal(goal)">
                              {{"Edit" | translate}}
                            </ion-button>
                        </ion-row>
                      </ion-grid>
                    </ion-card>
                    <ion-item class="width-100 height-50 secondary border-radius-20px margin-top-0"><h1>{{"Team" | translate }}</h1></ion-item>
                  </ion-col>
                  <ion-col size="8">
                    <div class="width-100 margin-top-10 height-100 secondary padding-10 border-radius-20px">
                      <ng-template #template let-displayEvent="displayEvent">
                        <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
                      </ng-template>
                      <ng-template #template let-displayEvent="displayEvent">
                        <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
                      </ng-template>
                      <ng-template #template let-displayEvent="displayEvent" >
                        <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
                      </ng-template>
                      <ng-template #template let-displayEvent="displayEvent" >
                        <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
                      </ng-template>
                      <calendar [eventSource]="eventSource"
                                [calendarMode]="calendar.mode"
                                [currentDate]="calendar.currentDate"
                                (onEventSelected)="onEventSelected($event)"
                                (onTitleChanged)="onViewTitleChanged($event)"
                                (onTimeSelected)="onTimeSelected($event)"
                                step="5"
                                class="calendar"
                                autoSelect="false"
                                [weekviewNormalEventTemplate]="template"
                                [weekviewAllDayEventTemplate]="template"
                                [dayviewNormalEventTemplate]="template"
                                [dayviewAllDayEventTemplate]="template"
                                scrollToHour="8"
                                [locale]="translate.currentLang"
                                formatHourColumn="{{'formatHourColumn' | translate }}"
                                formatWeekTitle="{{'formatWeekTitle' | translate }}"
                                formatDayTitle="{{'formatDayTitle' | translate }}"
                                startingDayWeek="1"
                                allDayLabel="{{'Deadlines' | translate }}">
                      </calendar>
                    </div>
                  </ion-col>
                </ion-row>
                <ion-row class="height-50 margin-5">
                  <ion-item class="margin-top-10 width-100 height-100 secondary border-radius-20px">
                    <ion-grid class="height-100">
                      <ion-row class="height-100">
                        <ion-col class="border-right height-100 overflow-scroll no-scrollbar">
                          <ion-buttons start>
                            <h1 class="display-inline-block margin-right-10">{{"Actions" | translate }}</h1>
                            <ion-button class="darkbutton" icon-only (click)="addAction(goal)">
                              <ion-icon name="add"></ion-icon>
                            </ion-button>
                          </ion-buttons>
                          <button class="block width-100 no-padding" *ngFor="let nextAction of actionArray" (click)="reviewAction(nextAction)">
                            <p class="border-top">{{nextAction.content}}</p>
                          </button>
                        </ion-col>
                        <ion-col class="border-right height-100 overflow-scroll no-scrollbar">
                          <ion-buttons start>
                            <h1 class="display-inline-block margin-right-10">{{"Delegations" | translate }}</h1>
                            <ion-button class="darkbutton" icon-only (click)="addDelegation(goal)">
                              <ion-icon name="add"></ion-icon>
                            </ion-button>
                          </ion-buttons>
                          <button class="block width-100 no-padding" *ngFor="let delegation of delegationArray" (click)="reviewDelegation(delegation)">
                            <p class="border-top">{{delegation.content}}</p>
                          </button>
                        </ion-col>
                        <ion-col class="height-100 overflow-scroll no-scrollbar">
                          <ion-buttons start>
                            <h1 class="display-inline-block margin-right-10">{{"References" | translate }}</h1>
                            <ion-button class="darkbutton" icon-only (click)="addReference(goal)">
                              <ion-icon name="add"></ion-icon>
                            </ion-button>
                          </ion-buttons>
                          <button class="block width-100 no-padding" *ngFor="let reference of referenceArray" (click)="reviewReference(reference)">
                            <p class="border-top">{{reference.content}}</p>
                          </button>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                </ion-row>
              </ion-grid>
            </ion-col>
            <ion-col size="3">
              <ion-item class="width-100 margin-top-10 height-100 secondary border-radius-20px"><h1>{{"Chat" | translate }}</h1></ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>

    <!-- mobile -->
    <div *ngIf="isApp" class="height-100">
      <div *ngIf="pageCtrl == ''">
        <ion-card class="height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px">
          <ion-item class="border-radius-20px">
            <ion-input type="text" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}"></ion-input>
          </ion-item>

          <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
        </ion-card>
        <ion-card class="height-150px overflow-y-hidden overflow-x-hidden text-align-center margin-10 display-inline-block secondary border-radius-20px" no-lines *ngFor="let goal of goalArray" (click)="reviewGoal(goal)">
          <ion-grid>
            <ion-row>
              <ion-col size="9">
                <h1 class="max-height-30px overflow-x-hidden width-90">{{goal.name}}</h1>
              </ion-col>
              <ion-col>
                <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
              </ion-col>
            </ion-row>
            <ion-row>
              <p class="one-line border-top width-100 overflow-x-hidden" *ngFor="let action of actions[goal.key]">{{action.content}}</p>
            </ion-row>
          </ion-grid>
        </ion-card>
      </div>


      <div class="height-100" *ngIf="pageCtrl == 'ProjectOverview'">
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ion-grid>
            <ion-row>
              <ion-col size="9">
                <h1>{{goal.name}}</h1>
                <ion-button class="darkbutton" (click)="deleteGoal(goal)">
                  {{"Delete" | translate}}
                </ion-button>
                <ion-button class="darkbutton" (click)="editGoal(goal)">
                  {{"Edit" | translate}}
                </ion-button>
              </ion-col>
              <ion-col>
                <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ion-buttons start>
            <h1 class="display-inline-block margin-right-10">{{"Actions" | translate }}</h1>
            <ion-button class="darkbutton"  icon-only (click)="addAction(goal)">
              <ion-icon name="add"></ion-icon>
            </ion-button>
          </ion-buttons>
          <button class="block width-100 no-padding" *ngFor="let nextAction of actionArray" (click)="reviewAction(nextAction)">
            <p class="border-top">{{nextAction.content}}</p>
          </button>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ion-buttons start>
            <h1 class="display-inline-block margin-right-10">{{"Delegations" | translate }}</h1>
            <ion-button class="darkbutton"  icon-only (click)="addDelegation(goal)">
              <ion-icon name="add"></ion-icon>
            </ion-button>
          </ion-buttons>
          <button class="block width-100 no-padding" *ngFor="let delegation of delegationArray" (click)="reviewDelegation(delegation)">
            <p class="border-top">{{delegation.content}}</p>
          </button>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ion-buttons start>
            <h1 class="display-inline-block margin-right-10">{{"References" | translate }}</h1>
            <ion-button class="darkbutton"  icon-only (click)="addReference(goal)">
              <ion-icon name="add"></ion-icon>
            </ion-button>
          </ion-buttons>
          <button class="block width-100 no-padding" *ngFor="let reference of referenceArray" (click)="reviewReference(reference)">
            <p class="border-top">{{reference.content}}</p>
          </button>
        </ion-card>
        <ion-card class="margin-0 height-100 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent" >
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <calendar [eventSource]="eventSource"
                    [calendarMode]="calendar.mode"
                    [currentDate]="calendar.currentDate"
                    (onEventSelected)="onEventSelected($event)"
                    (onTitleChanged)="onViewTitleChanged($event)"
                    (onTimeSelected)="onTimeSelected($event)"
                    step="5"
                    class="calendar"
                    autoSelect="false"
                    [weekviewNormalEventTemplate]="template"
                    [weekviewAllDayEventTemplate]="template"
                    [dayviewNormalEventTemplate]="template"
                    [dayviewAllDayEventTemplate]="template"
                    scrollToHour="8"
                    [locale]="translate.currentLang"
                    formatHourColumn="{{'formatHourColumn' | translate }}"
                    formatWeekTitle="{{'formatWeekTitle' | translate }}"
                    formatDayTitle="{{'formatDayTitle' | translate }}"
                    startingDayWeek="1"
                    allDayLabel="{{'Deadlines' | translate }}">
          </calendar>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <h1>{{"Team" | translate }}</h1>
        </ion-card>
        <ion-card class="margin-0 padding-10 margin-bottom-10 width-100 secondary border-radius-20px">
          <h1>{{"Chat" | translate }}</h1>
        </ion-card>
      </div>
    </div>
  </div>

  <!-- CalendarPage -->
    <div class="height-90 width-90 margin-top-10 secondary border-radius-20px" *ngIf="viewpoint == 'CalendarPage'">
      <ion-row class="width-100 height-10">
        <ion-col size="3">
          <ion-buttons start>
            <ion-button class="darkbutton" icon-only (click)="addEvent()">
              <ion-icon name="add"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-col>
        <ion-col style="text-align: center">
          <h2>{{ viewTitle }}</h2>
        </ion-col>
      </ion-row>
      <ion-row class="width-100 height-90">
        <div class="padding-10 height-90">
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <ng-template #template let-displayEvent="displayEvent">
            <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
          </ng-template>
          <calendar [eventSource]="eventSource"
                    [calendarMode]="calendar.mode"
                    [currentDate]="calendar.currentDate"
                    (onEventSelected)="onEventSelected($event)"
                    (onTitleChanged)="onViewTitleChanged($event)"
                    (onTimeSelected)="onTimeSelected($event)"
                    step="5"
                    class="calendar height-100"
                    autoSelect="false"
                    [weekviewNormalEventTemplate]="template"
                    [weekviewAllDayEventTemplate]="template"
                    [dayviewNormalEventTemplate]="template"
                    [dayviewAllDayEventTemplate]="template"
                    scrollToHour="8"
                    [locale]="translate.currentLang"
                    formatHourColumn="{{'formatHourColumn' | translate }}"
                    formatWeekTitle="{{'formatWeekTitle' | translate }}"
                    formatDayTitle="{{'formatDayTitle' | translate }}"
                    startingDayWeek="1"
                    allDayLabel="{{'Deadlines' | translate }}">
          </calendar>
        </div>
      </ion-row>
    </div>


</ion-content>
