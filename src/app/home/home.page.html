<ion-header>
	<ion-toolbar *ngIf="loggedin " id="headerr" class="header-background height-169px background-color-white">
    <ion-grid *ngIf="viewpoint != 'ActionPage' && viewpoint != 'PrivacyPolicyPage' && loggedin">
      <ion-row>
        <ion-col size="2" class="flex text-align-center no-padding">
          <button (click)="openMenu()" class="transparent margin-top-26">
            <img src="../../assets/icon/purple/icon_menu.svg" height="44">
          </button>
        </ion-col>
        <ion-col size="8" class="page-title flex no-padding">
          <span class="margin-top-32-auto">{{pageTitle | translate}}</span>
        </ion-col>
        <ion-col size="2" class="flex text-align-center no-padding">
          <!--
          <button (click)="search()" class="transparent margin-top-26">
            <img src="../../assets/icon/purple/icon_search.svg" height="44" class="margin-auto-auto">
          </button>
        -->
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid *ngIf="viewpoint == 'PrivacyPolicyPage'">
			<ion-row class="margin-top-32">
			  <ion-col size="2" class="flex text-align-center no-padding">
				<button class="transparent margin-auto" (click)="goToToDoPage()">
					<img src="../../assets/icon/purple/icon_arrow_left.svg" height="24">
				</button>
			  </ion-col>
			  <ion-col size="10" class="page-title flex no-padding">
				<span class="margin-auto">{{"Privacy Policy" | translate}}</span>
			  </ion-col>
			</ion-row>
		</ion-grid>
  </ion-toolbar>
  <ion-toolbar *ngIf="!loggedin" class="background-color-white">
    <div *ngIf="!loggedin" class="width-45px">
      <ion-menu-button class="no-padding">
        <img src="../../assets/icon/purple/icon_menu.svg" height="44">
      </ion-menu-button>
    </div>
	</ion-toolbar>
</ion-header>

<ion-content class="background-FCFDFF">

  <!-- Mobile LoginPage -->
	<div *ngIf="viewpoint == 'LoginPage'" class="height-100 width-100">
    <div class="margin-horizontal-auto font-size-48px color-6049C4 text-align-center">{{"Login" | translate}}</div>
    <img src="../../assets/icon/purple/robot_circle.svg" class="margin-top-20 margin-horizontal-auto display-block" height="244">
    <ion-input class="margin-top-20 width-90 margin-horizontal-auto border-6049C4-50per show-full-highlight-0 font-size-18px padding-5 border-radius-15px background-FFFFFF" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}" [(ngModel)]="loginEmail"></ion-input>
    <ion-input class="width-90 margin-horizontal-auto margin-top-15 border-6049C4-50per font-size-18px padding-5 border-radius-15px background-FFFFFF" type="password" placeholder="{{'Password' | translate }}" [(ngModel)]="loginPassword"></ion-input>
    <div padding-horizontal class="text-align-center margin-top-20">
      <div class="form-error">{{loginError}}</div>
      <button class="font-size-18px margin-auto padding-horizontal-50 background-6049C4 color-FFFFFF height-48px border-radius-48px" (click)="login()">{{"Log in" | translate }}</button>	
    </div>
    <ion-list class="margin-top-10 flex justify-content-center">
      <button class="font-size-20px color-6049C4 font-size-16px transparent" (click)="goToSignUp()">
        {{"Sign up" | translate }}
      </button>
      <button class="font-size-20px margin-left-20 color-6049C4 font-size-16px transparent" (click)="goToForgotPassword()">
        {{"Forgot password" | translate }}
      </button>
    </ion-list>
  </div>
  
  <!-- Mobile SignUpPage -->
	<div *ngIf="viewpoint == 'SignUpPage'" class="height-100 width-100">
    <div class="margin-horizontal-auto font-size-48px color-6049C4 text-align-center">{{"Login" | translate}}</div>
    <img src="../../assets/icon/purple/robot_circle.svg" class="margin-top-20 margin-horizontal-auto display-block" height="244">
    <ion-input class="margin-top-20 width-90 margin-horizontal-auto border-6049C4-50per show-full-highlight-0 font-size-18px padding-5 border-radius-15px background-FFFFFF" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}" [(ngModel)]="signUpEmail"></ion-input>
    <ion-input class="width-90 margin-horizontal-auto margin-top-15 border-6049C4-50per font-size-18px padding-5 border-radius-15px background-FFFFFF" type="password" placeholder="{{'Password' | translate }}" [(ngModel)]="signUpPassword"></ion-input>
    <div padding-horizontal class="text-align-center margin-top-20">
      <div class="form-error">{{signUpError}}</div>
      <button class="font-size-18px margin-auto padding-horizontal-50 background-6049C4 color-FFFFFF height-48px border-radius-48px" (click)="signUp()">{{"Sign up" | translate }}</button>
    </div>
    <ion-list class="margin-top-10 flex justify-content-center">
      <button class="font-size-20px color-6049C4 font-size-16px transparent" (click)="goToLoginPage()">
        {{"Login" | translate }}
      </button>
      <button class="font-size-20px margin-left-20 color-6049C4 font-size-16px transparent" (click)="goToForgotPassword()">
        {{"Forgot password" | translate }}
      </button>
    </ion-list>
  </div>
  
  <!-- Mobile ResetPasswordPage -->
	<div *ngIf="viewpoint == 'ResetPasswordPage'" class="height-100 width-100">
    <div class="margin-horizontal-auto font-size-48px color-6049C4 text-align-center">{{"Login" | translate}}</div>
    <img src="../../assets/icon/purple/robot_circle.svg" class="margin-top-20 margin-horizontal-auto display-block" height="244">
    <ion-input class="margin-top-20 width-90 margin-horizontal-auto border-6049C4-50per show-full-highlight-0 font-size-18px padding-5 border-radius-15px background-FFFFFF" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" placeholder="{{'Email' | translate }}" [(ngModel)]="resetPasswordEmail"></ion-input>
    <div padding-horizontal class="text-align-center margin-top-20">
      <div class="form-error">{{resetPasswordError}}</div>
      <button class="font-size-18px margin-auto padding-horizontal-50 background-6049C4 color-FFFFFF height-48px border-radius-48px" (click)="resetPassword()">{{"Reset password" | translate }}</button>			
    </div>
    <ion-list class="margin-top-10 flex justify-content-center">
      <button class="font-size-20px color-6049C4 font-size-16px transparent" (click)="goToLoginPage()">
        {{"Login" | translate }}
      </button>
      <button class="font-size-20px margin-left-20 color-6049C4 font-size-16px transparent" (click)="goToSignUp()">
        {{"Sign up" | translate }}
      </button>
    </ion-list>
  </div>


  <!-- Mobile SettingsPage -->
  <div class="width-90 padding-10 height-100-minus-95px overflow-scroll no-scrollbar" *ngIf="viewpoint == 'SettingsPage' && isApp">
    <ion-grid>
      <ion-row>
        <button class="font-size-20px margin-top-10" (click)="goToSendPushPage()" *ngIf="isAdmin">
          {{"Send Push" | translate }}
        </button>
      </ion-row>
      <ion-row class="margin-top-20">
        <span class="font-size-18px color-39297F font-weight-bold">{{"Manage Attributes" | translate}}</span>
      </ion-row>
      <ion-row class="margin-top-10">
        <span class="font-size-15px margin-right-10 color-6049C4 background-EDF2FF padding-10 border-radius-10px margin-bottom-10" *ngFor="let attribute of attributeArray">#{{attribute.content}}</span>
      </ion-row>
      <ion-row>
        <button *ngIf="userProfile.subscription == 'themesFeature'" class="font-size-20px margin-top-10" (click)="goToThemesPage()">{{"Themes" | translate}}</button>
      </ion-row>
    </ion-grid>
  </div>

  <!-- PrivacyPolicyPage -->
  <div class="height-100-minus-95px overflow-scroll no-scrollbar margin-auto" *ngIf="viewpoint == 'PrivacyPolicyPage' && isApp">
    <div class="transparent padding-10 width-90 color-6049C4 font-size-16px margin-auto">
      <p class="text-align-center">
      We built the Gossik app as
      a Freemium app. This SERVICE is provided by
      Gossik at no cost and is intended for
      use as is.
      </p>
      <p class="text-align-center">
      This page is used to inform visitors regarding
      our policies with the collection, use, and
      disclosure of Personal Information if anyone decided to use
      our Service.
      </p>
      <p class="text-align-center">
      If you choose to use our Service, then you agree
      to the collection and use of information in relation to this
      policy. The Personal Information that we collect is
      used for providing and improving the Service.
      We will not use or share your
      information with anyone except as described in this Privacy
      Policy.
      </p>
      <p class="text-align-center">
      The terms used in this Privacy Policy have the same meanings
      as in our Terms and Conditions, which is accessible at
      Gossik unless otherwise defined in this Privacy
      Policy.
      </p>
      <p class="text-align-center"><strong>Information Collection and Use</strong></p>
      <p class="text-align-center">
      For a better experience, while using our Service,
      we may require you to provide us with certain
      personally identifiable information, including but not limited to email address. The
      information that we request will be
      retained by us and used as described in this privacy policy.
      </p>
      <p class="text-align-center">
      The app does use third party services that may collect
      information used to identify you.
      </p>
      <div>
      <p class="text-align-center">
        Link to privacy policy of third party service providers
        used by the app
      </p>
      <ul>
        <li>
          <a href="https://www.google.com/policies/privacy/" class="color-6049C4" target="_blank">Google Play Services</a>
        </li>
        <li>
          <a href="https://firebase.google.com/policies/analytics" class="color-6049C4" target="_blank">Firebase Analytics</a>
        </li>
        <li>
          <a href="https://firebase.google.com/terms/crashlytics" class="color-6049C4" target="_blank">Firebase Crashlytics</a>
        </li>
      </ul>
      </div>
      <p class="text-align-center"><strong>Log Data</strong></p>
      <p class="text-align-center">
      We want to inform you that whenever
      you use our Service, in a case of an error in the
      app we collect data and information (through third
      party products) on your phone called Log Data. This Log Data
      may include information such as your device Internet
      Protocol (“IP”) address, device name, operating system
      version, the configuration of the app when utilizing
      our Service, the time and date of your use of the
      Service, and other statistics.
      </p>
      <p class="text-align-center"><strong>Cookies</strong></p>
      <p class="text-align-center">
      Cookies are files with a small amount of data that are
      commonly used as anonymous unique identifiers. These are
      sent to your browser from the websites that you visit and
      are stored on your device's internal memory.
      </p>
      <p class="text-align-center">
      This Service does not use these “cookies” explicitly.
      However, the app may use third party code and libraries that
      use “cookies” to collect information and improve their
      services. You have the option to either accept or refuse
      these cookies and know when a cookie is being sent to your
      device. If you choose to refuse our cookies, you may not be
      able to use some portions of this Service.
      </p>
      <p class="text-align-center"><strong>Service Providers</strong></p>
      <p class="text-align-center">
      We may employ third-party companies
      and individuals due to the following reasons:
      </p>
      <ul>
      <li>To facilitate our Service;</li>
      <li>To provide the Service on our behalf;</li>
      <li>To perform Service-related services; or</li>
      <li>To assist us in analyzing how our Service is used.</li>
      </ul>
      <p class="text-align-center">
      We want to inform users of this
      Service that these third parties have access to your
      Personal Information. The reason is to perform the tasks
      assigned to them on our behalf. However, they are obligated
      not to disclose or use the information for any other
      purpose.
      </p>
      <p class="text-align-center"><strong>Security</strong></p>
      <p class="text-align-center">
      We value your trust in providing us
      your Personal Information, thus we are striving to use
      commercially acceptable means of protecting it. But remember
      that no method of transmission over the internet, or method
      of electronic storage is 100% secure and reliable, and
      we cannot guarantee its absolute security.
      </p>
      <p class="text-align-center"><strong>Links to Other Sites</strong></p>
      <p class="text-align-center">
      This Service may contain links to other sites. If you click
      on a third-party link, you will be directed to that site.
      Note that these external sites are not operated by
      us. Therefore, we strongly advise you to
      review the Privacy Policy of these websites.
      We have no control over and assume no
      responsibility for the content, privacy policies, or
      practices of any third-party sites or services.
      </p>
      <p class="text-align-center"><strong>Children’s Privacy</strong></p>
      <p class="text-align-center">
      These Services do not address anyone under the age of 13.
      We do not knowingly collect personally
      identifiable information from children under 13. In the case
      we discover that a child under 13 has provided
      us with personal information,
      we immediately delete this from our servers. If you
      are a parent or guardian and you are aware that your child
      has provided us with personal information, please contact
      us so that we will be able to do
      necessary actions.
      </p>
      <p class="text-align-center"><strong>Changes to This Privacy Policy</strong></p>
      <p class="text-align-center">
      We may update our Privacy Policy from
      time to time. Thus, you are advised to review this page
      periodically for any changes. We will
      notify you of any changes by posting the new Privacy Policy
      on this page. These changes are effective immediately after
      they are posted on this page.
      </p>
      <p class="text-align-center"><strong>Contact Us</strong></p>
      <p class="text-align-center">
      If you have any questions or suggestions about
      our Privacy Policy, do not hesitate to contact
      us at benno.staub@gossik.ch.
      </p>
      </div>
  </div>

  <!-- Mobile AssistantPage -->
  <div class="height-100-minus-95px overflow-scroll no-scrollbar width-90 margin-auto" *ngIf="viewpoint == 'AssistantPage' && isApp">
    <ion-row class="width-100 text-align-right margin-bottom-20 margin-horizontal-auto">
      <ion-segment (ionChange)="switchAssistantTab($event)" value="today" mode="ios" class="background-EDF2FF border-radius-35px">
        <ion-segment-button  value="today" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
          <ion-label>{{"Today" | translate}}</ion-label>
        </ion-segment-button>
        <ion-segment-button value="statistics" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
          <ion-label>{{"Statistics" | translate}}</ion-label>
        </ion-segment-button>
        <ion-segment-button value="suggestions" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
          <ion-label>{{"Suggestions" | translate}}</ion-label>
        </ion-segment-button>
      </ion-segment>
    </ion-row>
    <div *ngIf="pageCtrl == 'today'" class="margin-top-25 height-100-minus-45px overflow-scroll no-scrollbar">
      <ion-row>
        <ion-col size="4" class="no-padding flex">
          <img src="../../assets/icon/purple/robot_circle.svg" height="80">
        </ion-col>
        <ion-col size="8" class="no-padding flex">
          <div class="border-radius-15px background-EDF2FF padding-20 width-100">
            <span class="font-size-18px color-39297F margin-auto">Hello this is a placeholder text for now.</span>
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="font-size-18px margin-top-25 color-39297F font-weight-bold">
        {{"Appointments & Meetings" | translate}}
      </ion-row>
      <ion-row class="margin-top-20 padding-15 background-F6F7FB seperating-border-bottom border-radius-15px" *ngFor="let calendarEvent of calendarEventsToday">
          <button  class="transparent text-align-left no-padding" (click)="onEventSelected(calendarEvent)">
            <span class="font-size-18px color-39297F">
              {{calendarEvent.startTimeString}} {{calendarEvent.title}}
            </span>
          </button>
      </ion-row>
      <ion-row class="font-size-18px margin-top-25 color-39297F font-weight-bold">
        {{"Critical Tasks" | translate}}
      </ion-row>
      <ion-row class="margin-top-20 padding-15 background-F6F7FB seperating-border-bottom border-radius-15px">
        <span class="font-size-18px color-39297F">
         TBD
        </span>
      </ion-row>
    </div>
    <div *ngIf="pageCtrl == 'statistics'" class="margin-top-25 height-100-minus-45px overflow-scroll no-scrollbar">
      <div class="border-radius-15px background-EDF2FF padding-20 width-100">
        <ion-row class="font-size-18px color-39297F margin-auto display-block width-100 text-align-center">{{"After you’ve started using Gossik for some days I’ll be able to show you statistics on how you progress with your to-dos and I will be able to suggest improvements!" | translate}}</ion-row>
        <ion-row>
          <img src="../../assets/icon/purple/empty_state_assistant.svg" height="250" class="margin-horizontal-auto">
        </ion-row>
      </div>
    </div>
    <div *ngIf="pageCtrl == 'suggestions'" class="margin-top-25 height-100-minus-45px overflow-scroll no-scrollbar">
      <div class="border-radius-15px background-EDF2FF padding-20 width-100">
        <ion-row class="font-size-18px color-39297F margin-auto display-block width-100 text-align-center">{{"After you’ve started using Gossik for some days I’ll be able to show you statistics on how you progress with your to-dos and I will be able to suggest improvements!" | translate}}</ion-row>
        <ion-row>
          <img src="../../assets/icon/purple/empty_state_assistant.svg" height="250" class="margin-horizontal-auto">
        </ion-row>
      </div>
    </div>
    <!--
    <ion-row class="margin-auto margin-top-20 width-90">
      <ion-radio-group class="font-gray font-size-20px display-block width-100" [(ngModel)]="assistant" (ionChange)="assignAssistant()">
        <ion-row>
          <ion-col size="1" class="padding-left-0 padding-right-0 flex">
            <ion-radio value="silent" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
          </ion-col>
          <ion-col size="11">
            <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignAssistant('silent')">
              {{"Silent" | translate }}
            </button>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="1" class="padding-left-0 padding-right-0 flex">
            <ion-radio value="chiller" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
          </ion-col>
          <ion-col size="11">
            <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignAssistant('chiller')">
              {{"Chiller" | translate }}
            </button>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="1" class="padding-left-0 padding-right-0 flex">
            <ion-radio value="standard" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
          </ion-col>
          <ion-col size="11">
            <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignAssistant('standard')">
              {{"Standard" | translate }}
            </button>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="1" class="padding-left-0 padding-right-0 flex">
            <ion-radio value="pusher" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
          </ion-col>
          <ion-col size="11">
            <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignAssistant('pusher')">
              {{"Pusher" | translate }}
            </button>
          </ion-col>
        </ion-row>
      </ion-radio-group>
    </ion-row>
    <ion-row *ngIf="userProfile.assistant == 'silent'" class="margin-auto font-size-20px width-90">
      <p>
        {{"silentAssistantDescription" | translate}}
      </p>
    </ion-row>
    <ion-row *ngIf="userProfile.assistant == 'chiller'" class="margin-auto font-size-20px width-90">
      <p>
        {{"chillerAssistantDescription" | translate}}
      </p>
    </ion-row>
    <ion-row *ngIf="userProfile.assistant == 'standard'" class="margin-auto font-size-20px width-90">
      <p>
        {{"standardAssistantDescription" | translate}}
      </p>
    </ion-row>
    <ion-row *ngIf="userProfile.assistant == 'pusher'" class="margin-auto font-size-20px width-90">
      <p>
        {{"pusherAssistantDescription" | translate}}
      </p>
    </ion-row>
    <ion-row>
      <h1>
        {{"Learned schedule" | translate}}
      </h1>
    </ion-row>
    <ion-row *ngIf="userProfile.subscription == 'learnedScheduleFeature' && !userProfile.subscriptionPaid" class="margin-auto font-size-20px width-90">
      <p>
      {{"unpaidLearnedScheduleSubscription" | translate }}
      </p>
    </ion-row>
    <ion-row *ngIf="userProfile.subscription != 'learnedScheduleFeature' || (userProfile.subscription == 'learnedScheduleFeature' && userProfile.subscriptionPaid)" class="margin-auto font-size-20px widt-90">
      <ng-template #template let-displayEvent="displayEvent">
        <div class="calendar-event-inner font-black" [ngStyle]="{'background-color': displayEvent.event.color, 'opacity': displayEvent.event.opacity}">{{displayEvent.event.title}}</div>
      </ng-template>
      <calendar 
                [eventSource]="eventSource"
                [calendarMode]="'week'"
                [currentDate]="calendar.currentDate"
                (onEventSelected)="onEventSelected($event, 'assistant')"
                formatWeekViewDayHeader="EEE"
                step="5"
                class="calendar padding-10 noAllDay width-100"
                autoSelect="false"
                lockSwipes="true"
                [weekviewNormalEventTemplate]="template"
                scrollToHour="6"
                [locale]="translate.currentLang"
                formatHourColumn="{{'formatHourColumn' | translate }}"
                startingDayWeek="1"
                allDayLabel="{{'Deadlines' | translate }}">
      </calendar>
    </ion-row>
  -->
  </div>

  <!-- FeedbackPage -->
  <div class="margin-top-10 padding-10 width-100 text-align-center height-100-minus-95px" *ngIf="viewpoint == 'FeedbackPage'">
    <ion-grid>
      <ion-row>
        <div class="width-90 border-6049C4-50per border-radius-15px margin-top-20-auto flex">
          <ion-textarea [(ngModel)]="feedback" placeholder="{{'Input feedback'| translate}}" class="display-inline-block width-100-minus-26 margin-left-10 text-align-left color-39297F"></ion-textarea>
        </div>
      </ion-row>
      <ion-row class="flex margin-top-20">
        <button class="font-size-20px height-36px border-radius-20px background-6049C4 color-FFFFFF margin-horizontal-auto" (click)="sendFeedback(feedback)">{{"Send feedback" | translate}}</button>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ShowFeedbackPage -->
  <div class="margin-top-10 padding-10   text-align-center height-100-minus-95px" *ngIf="viewpoint == 'ShowFeedbackPage'">
    <ion-item class="margin-bottom-10     border-bottom-1" *ngFor="let feedback of feedbackArray">{{feedback.feedback}}</ion-item>
  </div>

  <!-- SendPushPage -->
  <div class="margin-top-10 padding-10   text-align-center height-100-minus-95px" *ngIf="viewpoint == 'SendPushPage'">
    <ion-grid>
      <ion-row>
        <ion-textarea class="feedback     border-bottom-1" autoGrow="true" rows="3" cols="14" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="manualPushEN" placeholder="{{'Input EN push'| translate}}..."></ion-textarea>
      </ion-row>
      <ion-row>
        <ion-textarea class="feedback     border-bottom-1" autoGrow="true" rows="3" cols="14" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="manualPushDE" placeholder="{{'Input DE push'| translate}}..."></ion-textarea>
      </ion-row>
      <ion-row>
        <button class="button-design margin-auto margin-top-10" (click)="sendPush(manualPushEN, manualPushDE)">{{"Send push" | translate}}</button>
      </ion-row>
    </ion-grid>
  </div>

	<!-- CapturePage -->
  <div *ngIf="viewpoint == 'CapturePage' && !isApp">
    <ion-row class="width-40 margin-auto margin-top-10 height-20">
      <ion-card class="margin-top-10 width-100 text-align-center height-40 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-150px">
        <ion-item class="height-50 border-radius-20px">
          <ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}..."></ion-input>
        </ion-item>
        <ion-button class="darkbutton width-auto" (click)="addCapture(newCapture)">{{"Add" | translate}}</ion-button>
      </ion-card>
    </ion-row>
    <div *ngIf="takenActionListNotEmpty || captureListNotEmpty" class="secondary border-radius-20px width-90 margin-top-10 padding-bottom-10">
      <div *ngIf="takenActionListNotEmpty">
        <h3 class="padding-left-20">{{"Taken actions ready for processing" | translate}}:</h3>
        <button class="background-white width-100 text-align-left border-bottom-1 padding-left-20 padding-top-10" *ngFor="let takenAction of takenActionArray" (click)="goToProcessTakenActionPage(takenAction)">{{"You started with action" |translate}} "{{takenAction.content}}" {{", click here to process" | translate }}
        </button>
      </div>
      <div *ngIf="captureListNotEmpty">
        <h3 class="padding-left-20">{{"Thoughts captured and ready for processing" | translate}}:</h3>
        <ion-grid>
          <ion-row class="background-white border-bottom-1 width-100 min-height-30px" *ngFor="let capture of captureArray">
            <ion-col size="10" class="height-100">
              <button class="background-white text-align-left" (click)="goToProcessCapturePage(capture)">{{capture.content}}
              </button>
            </ion-col>
            <ion-col size="2" class="height-100">
              <button class="background-white" (click)="deleteCapture(capture)">{{ "Delete" | translate }}</button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>
  </div>
  <!-- Mobile CapturePage -->
  <div *ngIf="viewpoint == 'CapturePage' && isApp" class="height-100-minus-95px">
      <ion-card class="width-100 margin-0 text-align-center overflow-scroll no-scrollbar display-inline-block   min-height-150px">
        <ion-row class="width-90 margin-top-45 margin-left-auto margin-right-auto">
          <ion-col size="9.6" class="no-padding">
          <ion-input class="border-bottom-1   display-inline-block margin-0 width-90 font-size-30px" type="text" (ionFocus)="ionFocus($event)" (ionBlur)="ionBlur($event)" (keyup.enter)="addCapture(newCapture)" autocapitalize="on" [(ngModel)]="newCapture.content" placeholder="{{'Input new capture'| translate}}..."></ion-input>
          </ion-col>
          <!--
          <ion-col size="1.2" class="flex text-align-center no-padding">
            <button class="  no-padding" (click)="addCapturePicture()">
              <img src="../../assets/icon/icon_camera.png" height="15">
            </button>
          </ion-col>
          <ion-col size="1.2" class="flex text-align-center no-padding">
            <button class="  no-padding margin-auto" (click)="addCaptureVoice()">
              <img src="../../assets/icon/icon_microphone.png" height="20" class="margin-bottom-3">
            </button>
          </ion-col>
        -->
        </ion-row>
        <ion-row class="width-50 margin-top-85 margin-right-auto margin-left-auto">
          <ion-col size="6" class="flex text-align-center no-padding">
            <button class="  margin-auto-auto" (click)="cancelCapture()">
              <img src="../../assets/icon/icon_cancel.png" class="margin-bottom-3 img-height-60px img-width-60px">
            </button>
          </ion-col>
          <ion-col size="6" class="flex text-align-center">
            <button class="  no-padding margin-auto" (click)="addCapture(newCapture)">
              <img src="../../assets/icon/icon_confirm.png" class="margin-bottom-3 img-height-90px img-width-70px">
            </button>
          </ion-col>
        </ion-row>
      </ion-card>
  </div>

  <!-- ItemsPage -->
  <div *ngIf="viewpoint == 'ItemsPage' && !isApp">
    <div *ngIf="captureListNotEmpty">
      <h3 class="padding-left-20">{{"Thoughts captured and ready for processing" | translate}}:</h3>
      <ion-grid>
        <ion-row class="background-white border-bottom-1 width-100 min-height-30px" *ngFor="let capture of captureArray">
          <ion-col size="10" class="height-100">
            <button class="background-white text-align-left" (click)="goToProcessCapturePage(capture)">{{capture.content}}
            </button>
          </ion-col>
          <ion-col size="2" class="height-100">
            <button class="background-white" float-right (click)="deleteCapture(capture)">{{ "Delete" | translate }}</button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ItemsPage -->
  <div *ngIf="viewpoint == 'ItemsPage' && isApp" class="no-scrollbar height-100-minus-95px margin-0 width-100">
    <ion-grid class="height-100 width-100 no-padding">
      <ion-row class="width-90 text-align-right margin-bottom-20 margin-horizontal-auto">
        <ion-segment (ionChange)="switchItems($event)" value="thoughts" mode="ios" class="background-EDF2FF border-radius-35px">
          <ion-segment-button  value="thoughts" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
            <ion-label>{{"Unassigned Thoughts" | translate}}</ion-label>
          </ion-segment-button>
          <ion-segment-button value="projects" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
            <ion-label>{{"Projects" | translate}}</ion-label>
          </ion-segment-button>
        </ion-segment>
      </ion-row>
      <div *ngIf="pageCtrl == 'thoughts'" class="height-100-minus-64px overflow-scroll no-scrollbar width-90 margin-horizontal-auto">
        <ion-row class="margin-horizontal-auto margin-bottom-20 padding-15 border-radius-15px seperating-border-bottom background-F6F7FB" *ngFor="let capture of captureArray">
          <button  class="transparent text-align-left" (click)="showThought(capture)">
            <span class="font-size-18px color-39297F">
              {{capture.content}}
            </span>
          </button>
        </ion-row>
      </div>
      <div *ngIf="pageCtrl == 'projects'" class="height-100-minus-64px overflow-scroll no-scrollbar width-90 margin-horizontal-auto margin-top-20">
        <ion-row (click)="goToProjectOverviewPage(goal)" class="margin-horizontal-auto margin-bottom-20 border-radius-15px seperating-border-bottom background-F6F7FB padding-15 width-100" *ngFor="let goal of goalArray">
          <ion-row *ngIf="goal.key != 'unassigned'" class="width-100">
            <ion-card class="project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
            <span class="font-size-20px margin-left-7 font-weight-bold width-100-minus-30px one-line overflow-x-hidden color-39297F">
              {{goal.name}}
            </span>
          </ion-row>
          <ion-row *ngIf="goal.key != 'unassigned'" class="width-100 color-39297F margin-top-15">
            <span class="font-size-18px font-weight-bold">X</span>
            <span class="font-size-18px margin-left-5">{{"Thoughts" | translate}}</span>
            <span class="font-size-18px font-weight-bold margin-left-15">Y</span>
            <span class="font-size-18px margin-left-5">{{"To-dos" | translate}}</span>
          </ion-row>
        </ion-row>
      </div>
    </ion-grid>
  </div>

  <!-- ProjectOverviewPage -->
  <!-- Mobile ProjectOverviewPage -->
  <div *ngIf="viewpoint == 'ProjectOverviewPage' && isApp" class="no-scrollbar height-100-minus-95px width-100">
    <!--
    <ion-row class="width-100 padding-8-0-8-0 seperating-border-bottom height-25px">
      <button class="transparent font-weight-bold" (click)="editGoal(goal)">
        {{"Edit Project" | translate}}
      </button>
    </ion-row>
    -->
    <ion-row class="width-90 padding-8-0-8-0 margin-auto font-weight-bold color-39297F">
      {{"Thoughts" | translate}}
    </ion-row>
    <div class="height-50-minus-34px overflow-scroll no-scrollbar width-90 margin-horizontal-auto">
      <ion-row class="margin-horizontal-auto margin-bottom-20 padding-15 border-radius-15px seperating-border-bottom background-F6F7FB" *ngFor="let capture of references[goal.key]">
        <button  class="transparent text-align-left" (click)="showThought(capture)">
          <span class="font-size-18px color-39297F">
            {{capture.content}}
          </span>
        </button>
      </ion-row>
    </div>
    <ion-row class="width-90 padding-8-0-8-0 margin-auto font-weight-bold color-39297F">
      {{"To-dos" | translate}}
    </ion-row>
    <ion-row class="height-50-minus-34px width-90 margin-horizontal-auto overflow-scroll no-scrollbar">
      <div *ngFor="let todo of actions[goal.key]" (click)="showToDo(todo)" class="color-39297F width-100 padding-15 border-radius-15px margin-top-10 seperating-border-bottom background-F6F7FB">
        <ion-row class="font-size-18px text-align-left">
          <span>
            {{todo.content}}
          </span>
        </ion-row>
        <ion-row class="text-align-left font-size-12px">
          <span *ngIf="todo.goalid != 'unassigned'" class="margin-right-3 border-radius-30px padding-3" [ngStyle]="{'background-color': goalDict[todo.goalid].color}">
            {{goalDict[todo.goalid].name}}
          </span>
          <span *ngIf="todo.deadline" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
            <img src="../../assets/icon/purple/icon_calendar.svg" class="margin-left-7-auto margin-right-3" height="10">{{dateFormated(todo.deadline)}}
          </span>
          <span *ngIf="todo.priority" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
            <img src="../../assets/icon/purple/icon_priority.svg" class="margin-left-7-auto margin-right-3" height="10">{{todo.priority}}
          </span>
          <span *ngIf="todo.time" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
            {{todo.time}}{{"min" | translate }}
          </span>
        </ion-row>
      </div>
    </ion-row>
  </div>

  <!-- ProcessCapturePage -->
  <div *ngIf="viewpoint=='ProcessCapturePage' && !isApp">
    <div *ngIf="pageCtrl == ''">
      <ion-grid>
        <ion-row class="width-100">
          <ion-col size="3">
            <ion-card class="width-100 margin-top-0 secondary border-radius-20px text-align-center overflow-y-scroll no-scrollbar">
              <div class="height-100 width-100 max-height-500px margin-vertical-center-parent overflow-y-scroll no-scrollbar">
              <p class="width-100 margin-10px overflow-y-scroll no-scrollbar text-align-center">{{capture.content}}</p>
            </div>
            <ion-button class="darkbutton display-block" (click)="deleteCapture(capture)">{{ "Delete" | translate }}</ion-button>
            </ion-card>
            <ion-card class="text-align-center margin-top-10 overflow-scroll no-scrollbar width-100 margin-left-0 display-inline-block secondary border-radius-20px">
              <ion-item class="border-radius-20px">
                <ion-input class="border-bottom-1" type="text" (ionFocus)="ionFocus($event)" autocapitalize="on" [(ngModel)]="goalname" placeholder="{{'Project name' | translate}}..."></ion-input>
              </ion-item>
              <ion-button class="darkbutton margin-auto margin-bottom-10 margin-top-10" (click)="addGoal(goalname)">{{"Create" | translate }}</ion-button>
            </ion-card>
          </ion-col>
          <ion-col>
            <ion-card class="width-400px overflow-x-hidden text-align-center margin-top-0 height-20 overflow-scroll no-scrollbar margin-right-10 display-inline-block secondary border-radius-20px min-height-100px" no-lines *ngFor="let goal of goalArray">
              <ion-grid>
                <ion-row>
                    <h1 class="max-height-30px margin-0 overflow-x-hidden width-90 display-inline-block">{{goal.name}}</h1>
                    <ion-card class="margin-top-0 margin-right-0 project-color" [ngStyle]="{'background-color': goal.color}"></ion-card>
                </ion-row>
                <ion-row >
                  <ion-button class="darkbutton button-left" (click)="addAction(goal, capture)">{{"Action" | translate }}</ion-button>
                  <ion-button class="darkbutton button-left" (click)="addDelegation(goal, capture)">{{"Delegation" | translate }}</ion-button>
                  <ion-button class="darkbutton button-left" (click)="addReference(goal, capture)">{{"Reference" | translate }}</ion-button>
                </ion-row>
              </ion-grid>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ProcessCapturePage -->
  <div *ngIf="viewpoint=='ProcessCapturePage' && isApp" class="height-100-minus-95px">
    <ion-grid class="padding-20 padding-top-0 height-100 overflow-scroll no-scrollbar">
      <ion-card class="text-align-center margin-5     width-100 font-size-20px">
          <ion-textarea class="    margin-0 width-90 text-align-left font-size-20px" type="text" autoGrow="true" (ionBlur)="assignContent($event)" (ionChange)="assignContent($event)" autocapitalize="on" [(ngModel)]="captureContent" placeholder="{{capturePlaceholder | translate }}..." (ionFocus)="ionFocus($event)"></ion-textarea>
      </ion-card>
      <ion-row *ngIf="showCaptureType && !cameFromToDoPage">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Type" | translate }}
        </span>
        <ion-radio-group class="font-gray font-size-20px width-100" [(ngModel)]="captureType" (ionChange)="assignType()">
          <ion-row class="margin-left-50 margin-top-10">
            <ion-col size="1" class="padding-left-0 padding-right-0 flex">
              <ion-radio value="action" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
            </ion-col>
            <ion-col size="11">
              <button *ngIf="!userProfile.tutorial.process" class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignType('action')">
                {{"Action" | translate }}
              </button>
              <button *ngIf="userProfile.tutorial.process" class="    font-size-20px width-100 text-align-left padding-left-0">
                {{"Action" | translate }}
              </button>
            </ion-col>
          </ion-row>
          <ion-row  *ngIf="!cameFromToDoPage" class="margin-left-50">
            <ion-col size="1" class="padding-left-0 padding-right-0 flex">
              <ion-radio value="note" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
            </ion-col>
            <ion-col size="11">
              <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignType('note')">
                {{"Note" | translate }}
              </button>
            </ion-col>
          </ion-row>
        </ion-radio-group>
      </ion-row>
      <ion-row *ngIf="showCaptureDuration">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Duration" | translate }}
        </span>
        <ion-row class="width-100 margin-top-10 margin-left-50">
          <ion-col class="padding-left-0">
            <span class="  font-size-20px" (click)="openPicker('ProcessCapturePageDuration')">{{duration}}{{"min" | translate }}</span>
          </ion-col>
        </ion-row>
      </ion-row>
      <ion-row *ngIf="showCapturePriority">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Priority" | translate }}
        </span>
        <ion-radio-group class="font-gray font-size-20px width-100" [(ngModel)]="capturePriority">
          <ion-row class="margin-left-50 margin-top-10">
            <ion-col size="1" class="padding-left-0 padding-right-0 flex" (click)="assignPriority('1')">
              <ion-radio value="1" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
            </ion-col>
            <ion-col size="11">
              <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignPriority('1')">
                {{"low" | translate }}
              </button>
            </ion-col>
          </ion-row>
          <ion-row class="margin-left-50">
            <ion-col size="1" class="padding-left-0 padding-right-0 flex" (click)="assignPriority('2')">
              <ion-radio value="2" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
            </ion-col>
            <ion-col size="11">
              <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignPriority('2')">
                {{"medium" | translate }}
              </button>
            </ion-col>
          </ion-row>
          <ion-row class="margin-left-50">
            <ion-col size="1" class="padding-left-0 padding-right-0 flex" (click)="assignPriority('3')">
              <ion-radio value="3" class="height-15px width-15px margin-top-auto margin-bottom-auto margin-left-0"></ion-radio>
            </ion-col>
            <ion-col size="11">
              <button class="    font-size-20px width-100 text-align-left padding-left-0" (click)="assignPriority('3')">
                {{"high" | translate }}
              </button>
            </ion-col>
          </ion-row>
        </ion-radio-group>
      </ion-row>
      <ion-row *ngIf="showCaptureProject">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Project" | translate }}
        </span>
        <button *ngIf="captureType == 'action'" class="  no-padding" (click)="deleteOptional('project')">
          <img src="../../assets/icon/icon_delete.png" height="20">
        </button>
        <ion-row class="width-100 margin-top-10 margin-left-50">
          <ion-col class="padding-left-0">
            <button *ngIf="captureProject.key != 'unassigned'" class="    no-padding text-align-left overflow-x-hidden font-size-20px" (click)="assignProject()">
              {{captureProject.name}}
            </button>
            <button *ngIf="captureProject.key == 'unassigned'" class="button-design overflow-x-hidden font-size-20px" (click)="assignProject()">
              {{"Assign project" | translate}}...
            </button>
          </ion-col>
        </ion-row>
      </ion-row>
      <ion-row *ngIf="showCaptureDeadline">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Deadline" | translate }}
        </span>
        <button class="  no-padding" (click)="deleteOptional('deadline')">
          <img src="../../assets/icon/icon_delete.png" height="20">
        </button>
        <ion-row class="width-100 margin-top-10 margin-left-50" *ngIf="!captureDeadline">
          <ion-col class="padding-left-0">
            <button class="button-design font-size-20px" (click)="assignDeadline()">
                {{"Add deadline" | translate }}
            </button>
          </ion-col>
        </ion-row>
        <ion-row class="width-100 margin-top-10 margin-left-50" *ngIf="captureDeadline">
          <ion-col class="padding-left-0">
            <button class="    font-size-20px no-padding text-align-left display-inline-block" (click)="assignDeadline()">{{captureDeadlineText}}
            </button>
          </ion-col>
        </ion-row>
      </ion-row>
      <ion-row *ngIf="showCaptureSchedule">
        <span class="font-gray font-size-20px display-inline-block border-bottom-1">
          {{"Do on specific day" | translate }}
        </span>
        <button class="  no-padding" (click)="deleteOptional('schedule')">
          <img src="../../assets/icon/icon_delete.png" height="20">
        </button>
        <ion-row class="width-100 margin-top-10 margin-left-50">
          <ion-col class="padding-left-0">
            <ion-datetime class="  no-padding" displayFormat="DDD DD.MMM YYYY - HH:mm" dayShortNames="[{{'Sun' | translate}}, {{'Mon' | translate}}, {{'Tue' | translate}}, {{'Wed' | translate}}, {{'Thu' | translate}}, {{'Fri' | translate}}, {{'Sat' | translate}}]" pickerFormat="DD MMM YYYY - HH:mm" max="2100" [(ngModel)]="captureScheduleISOString" [doneText]="translate.instant('Done')" [cancelText]="translate.instant('Cancel')" (ionChange)="setSchedule()"></ion-datetime>
          </ion-col>
        </ion-row>
      </ion-row>
      <ion-row class="width-100 margin-top-10" *ngIf="showOptionals">
        <button *ngIf="!showCaptureProject" class="    font-size-20px no-padding text-align-left width-100" (click)="addOptional('project')">{{"Project" | translate}}
        </button>
        <button *ngIf="!showCaptureDeadline" class=" margin-top-10     font-size-20px no-padding text-align-left width-100" (click)="addOptional('deadline')">{{"Deadline" | translate}}
        </button>
        <button *ngIf="!showCaptureSchedule" class=" margin-top-10     font-size-20px no-padding text-align-left width-100" (click)="addOptional('schedule')">{{"Do on specific day" | translate}}
        </button>
      </ion-row>
      <ion-row *ngIf="showCaptureDone && captureType == 'action' && !showOptionals && captureShowAdd" class="margin-top-10">
        <button class="  font-gray" (click)="checkOptional()">
          <img src="../../assets/icon/icon_add.png" height="20">
        </button>
      </ion-row>
    </ion-grid>
    <ion-row *ngIf="showCaptureDone" class="height-70px">
      <ion-col class="flex">
        <button class="  font-gray margin-auto width-100" (click)="processCapture()">
          <img src="../../assets/icon/icon_confirm.png" height="30" class="margin-auto">
        </button>
      </ion-col>
    </ion-row>
  </div>

  <!-- ProcessTakenActionPage -->
  <div *ngIf="viewpoint=='ProcessTakenActionPage'" class="secondary width-90 border-radius-20px padding-10 margin-top-10">
    <div *ngIf="pageCtrl == ''">
      {{"Please indicate whether you finished the action or want to abort it." | translate }}<br>
      <div class="buttons-flex-container">
        <ion-button class="darkbutton button-left" (click)="actionFinished()">{{"Finished" | translate }}</ion-button>
        <ion-button class="darkbutton button-right" (click)="abortAction()">{{"Abort" | translate }}</ion-button>
      </div>
    </div>

    <div *ngIf="pageCtrl == 'actionAborted'">
      {{"You aborted this action, it has been put back into your actions list." | translate }}
    </div>

    <div *ngIf="pageCtrl == 'actionFinished'">
      {{"Congrats! Is your project now accomplished and can be deleted?" | translate }}
      <div class="buttons-flex-container">
        <!-- Had to comment this one because deleted 'goalFinished' function
        <ion-button class="darkbutton button-left" (click)="goalFinished()">{{"Accomplished" | translate }}</ion-button>
        -->
        <ion-button class="darkbutton button-right" (click)="finishAction()">{{"Not yet" | translate }}</ion-button>
      </div>
    </div>
  </div>

  <!-- FinishActionPage -->
  <!-- Mobile FinishActionPage -->
  <div class="height-100-minus-95px overflow-scroll" *ngIf="viewpoint == 'FinishActionPage' && isApp">
    <ion-grid>
      <ion-row class="margin-top-45">
        <button class="button-design font-size-20px" (click)="defineFollowUpTodoNow()">
          {{"Define follow-up todo now" | translate}}
        </button>
      </ion-row>
      <ion-row class="margin-top-20">
        <button class="button-design font-size-20px" (click)="defineFollowUpTodoLater()">
          {{"Define follow-up todo later" | translate}}
        </button>
      </ion-row>
      <ion-row class="margin-top-20">
        <button class="button-design font-size-20px" (click)="noFollowUpTodoRequired()">
          {{"No follow-up todo required" | translate}}
        </button>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ToDoPage -->
  <div class="height-100" *ngIf="viewpoint == 'ToDoPage' && !isApp">
    <div class="height-100" *ngIf="pageCtrl == ''">
      <ion-grid class="height-100">
        <ion-row>
          <ion-col size="4" class="primary flex">
            <form class="flex width-100" (ngSubmit)="showDoableActions()" [formGroup]="giveTimeForm">
              <ion-label class="width-50 margin-auto min-width-175px primary display-inline-block">{{"Time available in minutes" | translate }}:</ion-label>
              <ion-input #TimeAvailable class="width-50 border-bottom-1" type="number" min="0" formControlName="timeEstimate" (ionChange)="showDoableActions()" autofocus="true"></ion-input>
            </form>
          </ion-col>
          <ion-col size="8">
            <ion-item class="border-radius-20px">
            <ion-select multiple [(ngModel)]="goalKeyArray" (ionChange)="chooseGoal($event)" placeholder="{{'All Projects' | translate}}...">
              <ion-label>{{"Project" | translate }}</ion-label>
              <ion-select-option *ngFor="let goal of goalArray" value="{{goal.key}}">{{goal.name}}</ion-select-option>
            </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
          <div class="content-container min-height-150px">
            <ion-grid>
              <ion-row>
                <ion-col size="8">{{"Action" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Project" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Priority" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Time" | translate}}</ion-col>
                <ion-col size="1" class="text-align-center">{{"Deadline" | translate}}</ion-col>
              </ion-row>
              <ion-row class="background-white margin-bottom-1 border-radius-5px" *ngFor="let action of doableActionArray" (click)="takeThisAction(action)">
                <ion-col size="8">
                  <ion-card class="margin-0 project-color display-inline-block" [ngStyle]="{'background-color': goalDict[action.goalid].color}"></ion-card>
                {{action.content}}
                </ion-col>
                <ion-col size="1" class="text-align-center">{{goalDict[action.goalid].name}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.priority}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.time}}</ion-col>
                <ion-col size="1" class="text-align-center">{{action.deadline}}</ion-col>
              </ion-row>
            </ion-grid>
          </div>
        </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  <!-- Mobile ToDoPage -->
  <div class="height-100-minus-95px" *ngIf="viewpoint == 'ToDoPage' && isApp">
    <ion-grid class="width-90 height-100 overflow-hidden no-padding">
      <ion-row class="flex justify-conent-space-evenly height-168px">
        <button (click)="setAvailableTime()" class="color-6049C4 flex background-EDF2FF border-radius-10px height-54px">
          <img src="../../assets/icon/purple/icon_duration.svg" class="margin-vertical-auto" height="24">
          <span *ngIf="!duration" class="margin-vertical-auto margin-left-5 text-align-center font-size-18px">{{"Set available time" | translate}}</span>
          <span *ngIf="duration" class="margin-vertical-auto margin-left-5 text-align-center font-size-18px">{{duration}}{{"min" | translate}}</span>
        </button>
        <button (click)="filterToDos()" class="color-6049C4 flex background-EDF2FF border-radius-10px height-54px">
          <img src="../../assets/icon/purple/icon_filter.svg" class="margin-vertical-auto" height="24">
          <span class="margin-vertical-auto margin-left-5 text-align-center font-size-18px">{{"Filter" | translate}}</span>
        </button>
        <span class="margin-top-20-auto flex background-EDF2FF border-radius-10px height-54px color-6049C4">
        <ion-toggle color="tertiary" [(ngModel)]="smartAssistantToggle" (ionChange)="smartAssistant()" class="margin-vertical-auto"></ion-toggle>
        <span class="margin-vertical-auto font-size-18px">{{"Smart assistant" | translate}}</span>
        <button (click)="showInfo('smartAssistant')" class="transparent">
          <img src="../../assets/icon/purple/icon_info.svg" class="margin-left-7-auto" height="24">
          </button>
        </span>
      </ion-row>
      <ion-row class="height-100-minus-168px overflow-scroll no-scrollbar">
        <div *ngIf="!smartAssistantToggle">
          <ion-grid *ngFor="let todo of doableActionArray" (click)="showToDo(todo)" class="color-39297F border-radius-15px padding-15 width-100 margin-top-10 seperating-border-bottom background-F6F7FB">
            <ion-row class="font-size-18px text-align-left">
              <span>
                {{todo.content}}
              </span>
            </ion-row>
            <ion-row class="text-align-left font-size-12px">
              <span *ngIf="todo.goalid != 'unassigned'" class="margin-right-3 border-radius-30px padding-3" [ngStyle]="{'background-color': goalDict[todo.goalid].color}">
                {{goalDict[todo.goalid].name}}
              </span>
              <span *ngIf="todo.deadline" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
                <img src="../../assets/icon/purple/icon_calendar.svg" class="margin-left-7-auto margin-right-3" height="13">{{dateFormated(todo.deadline)}}
              </span>
              <span *ngIf="todo.priority" class="margin-right-3 border-radius-30px background-FFFFFF padding-3 flex">
                <img src="../../assets/icon/purple/icon_priority.svg" class="margin-left-7-auto margin-right-3 margin-vertical-auto" height="13">
                <span>{{priorityFormat[todo.priority] | translate}}</span>
              </span>
              <span *ngIf="todo.time" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
                {{todo.time}}{{"min" | translate }}
              </span>
            </ion-row>
          </ion-grid>
        </div>
        <div *ngIf="smartAssistantToggle">
          <ion-grid *ngFor="let todo of doableActionArray" (click)="showToDo(todo)" class="color-39297F border-radius-15px padding-15 width-100 margin-top-10 seperating-border-bottom background-F6F7FB">
            <ion-row class="font-size-18px text-align-left">
              <span>
                {{todo.content}}
              </span>
            </ion-row>
            <ion-row class="text-align-left font-size-12px">
              <span *ngIf="todo.goalid != 'unassigned'" class="margin-right-3 border-radius-30px padding-3" [ngStyle]="{'background-color': goalDict[todo.goalid].color}">
                {{goalDict[todo.goalid].name}}
              </span>
              <span *ngIf="todo.deadline" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
                <img src="../../assets/icon/purple/icon_calendar.svg" class="margin-left-7-auto margin-right-3" height="10">{{dateFormated(todo.deadline)}}
              </span>
              <span *ngIf="todo.priority" class="margin-right-3 border-radius-30px background-FFFFFF padding-3 flex">
                <img src="../../assets/icon/purple/icon_priority.svg" class="margin-left-7-auto margin-right-3 margin-vertical-auto" height="13">
                <span>{{priorityFormat[todo.priority] | translate}}</span>
              </span>
              <span *ngIf="todo.time" class="margin-right-3 border-radius-30px background-FFFFFF padding-3">
                {{todo.time}}{{"min" | translate }}
              </span>
            </ion-row>
          </ion-grid>
        </div>
      </ion-row>
    </ion-grid>
  </div>

  <!-- ActionPage -->
  <!-- No Desktop ActionPage yet -->
  <!-- Mobile ActionPage -->
  <div class="height-100-minus-95px" *ngIf="viewpoint == 'ActionPage' && isApp">
    <ion-grid class="height-100 width-90 overflow-scroll no-scrollbar">
      <ion-row class="margin-top-45 margin-auto font-size-32px text-align-center">
        <span class="margin-auto color-6049C4">
          {{"Focus on" | translate}}:
        </span>
      </ion-row>
      <ion-row class="margin-auto font-size-32px text-align-center">
        <span class="margin-auto color-39297F">
          {{startedAction.content}}
        </span>
      </ion-row>
      <ion-row class="margin-auto color-39297F text-align-center">
        <span class="margin-auto" *ngIf="startedAction.goalid != 'unassigned'">
          {{goalDict[startedAction.goalid].name}}
        </span>
      </ion-row>
      <div class="margin-horizontal-auto margin-top-80 text-align-center width-260px height-260px background-focus-circle flex">
          <ion-row class="margin-auto color-6049C4 font-size-18px">
            <span class="margin-horizontal-auto display-block width-100 text-align-center">{{"Elapsed Time" | translate}}</span>
            <span class="margin-horizontal-auto display-block">{{elapsedTime}} {{"min" | translate}}</span>
          </ion-row>
      </div>
      <ion-row class="margin-top-45 margin-right-auto margin-left-auto">
        <ion-col class="flex text-align-center">
          <button class="font-size-20px height-36px border-radius-20px background-EDF2FF color-6049C4" (click)="stopToDo()">
            {{"Stop To-do" | translate}}
          </button>
        </ion-col>
        <ion-col class="flex text-align-center">
          <button class="font-size-20px height-36px border-radius-20px background-6049C4 color-FFFFFF margin-left-20" (click)="finishToDo()">
            {{"Finish" | translate}}
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- CalendarPage -->
  <div class="height-90 width-90 margin-top-10 secondary border-radius-20px" *ngIf="viewpoint == 'CalendarPage' && !isApp">
    <ion-row class="width-100 height-45px">
      <ion-col size="1">
        <ion-buttons start>
          <ion-button class="darkbutton" icon-only (click)="addEvent()">
            <ion-icon name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-col>
      <ion-col class="text-align-center">
        <button class="background- " icon-only (click)="changeWeek(-1)">
          <ion-icon class="size-20px" name="arrow-back"></ion-icon>
        </button>
        <button class="background- " (click)="changeDate()">
          <h2 class="display-inline-block margin-0" *ngIf="!isApp">{{ viewTitle }}</h2>
        </button>
        <button class="background- " icon-only (click)="changeWeek(1)">
          <ion-icon class="size-20px" name="arrow-forward"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
    <ion-row class="width-100 height-85">
      <div class="width-100 padding-10 height-90">
        <ng-template #template let-displayEvent="displayEvent">
          <div class="calendar-event-inner" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
        </ng-template>
        <calendar [eventSource]="eventSource"
                  [calendarMode]="calendar.mode"
                  [currentDate]="calendar.currentDate"
                  (onEventSelected)="onEventSelected($event)"
                  (onTitleChanged)="onViewTitleChanged($event)"
                  (onTimeSelected)="onTimeSelected($event)"
                  step="5"
                  class="calendar height-100"
                  autoSelect="false"
                  [weekviewNormalEventTemplate]="template"
                  [weekviewAllDayEventTemplate]="template"
                  [dayviewNormalEventTemplate]="template"
                  [dayviewAllDayEventTemplate]="template"
                  scrollToHour="8"
                  [locale]="translate.currentLang"
                  formatHourColumn="{{'formatHourColumn' | translate }}"
                  formatWeekTitle="{{'formatWeekTitle' | translate }}"
                  formatDayTitle="{{'formatDayTitle' | translate }}"
                  startingDayWeek="1"
                  startingDayMonth="1"
                  allDayLabel="{{'Deadlines' | translate }}">
        </calendar>
      </div>
    </ion-row>
  </div>
  <!-- Mobile CalendarPage -->
  <div class="height-100-minus-95px width-100" *ngIf="viewpoint == 'CalendarPage' && isApp">
    <ion-grid class="width-90 height-100">
      <ion-row class="width-100 text-align-right margin-bottom-20">
        <ion-segment (ionChange)="changeCalendarMode($event)" value="{{calendar.mode}}" class="background-EDF2FF border-radius-35px">
          <ion-segment-button value="month" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
            <ion-label>{{"Month" | translate}}</ion-label>
          </ion-segment-button>
          <ion-segment-button value="week" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
            <ion-label>{{"Week" | translate}}</ion-label>
          </ion-segment-button>
          <ion-segment-button value="day" class="border-style-none color-39297F padding-end-3 padding-start-3 border-radius-50per">
            <ion-label>{{"Day" | translate}}</ion-label>
          </ion-segment-button>
        </ion-segment>
      </ion-row>
      <div class="height-100-minus-64px overflow-scroll no-scrollbar">
        <ion-row class="width-100 height-45px">
          <span class="flex width-100-minus-45px">
            <h3 class="font-size-24px color-39297F margin-vertical-auto">{{ viewTitle }}</h3>
          </span>
          <span class="flex">
            <button (click)="changeDate(-1)" class="transparent no-padding width-22px">
              <img src="../../assets/icon/purple/icon_arrow_left.svg" height="16">
            </button>
            <button (click)="changeDate(1)" class="transparent no-padding width-22px">
              <img src="../../assets/icon/purple/icon_arrow_right.svg" height="16">
            </button>
          </span>
        </ion-row>
        <ion-row class="width-100 height-100-minus-70px">
          <div class="width-100 padding-10 height-90" *ngIf="calendar.mode == 'month'">
            <ng-template #template let-showEventDetail="showEventDetail" let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel">
              <ion-grid class="event-detail-container" *ngIf="showEventDetail">
                    <ion-row *ngFor="let event of selectedDate?.events" (click)="onEventSelected(event)" class="padding-15 border-radius-15px margin-top-10 flex" [ngStyle]="{'background-color': event.color}">
                        <span *ngIf="!event.allDay" class="margin-vertical-auto font-size-18px color-39297F">{{event.startTime|date: 'HH:mm'}} {{event.title}}</span>
                        <span *ngIf="event.allDay" class="margin-vertical-auto font-size-18px color-39297F">{{allDayLabel}} {{event.title}}</span>
                    </ion-row>
                    <ion-row *ngIf="selectedDate?.events.length==0">
                        <div class="no-events-label font-size-18px color-39297F">{{noEventsLabel}}</div>
                    </ion-row>
                </ion-grid>
            </ng-template>
            <calendar [eventSource]="eventSource"
                      [calendarMode]="calendar.mode"
                      [currentDate]="calendar.currentDate"
                      (onEventSelected)="onEventSelected($event)"
                      (onTitleChanged)="onViewTitleChanged($event)"
                      (onTimeSelected)="onTimeSelected($event)"
                      step="5"
                      class="calendar height-100 color-6049C4"
                      autoSelect="true"
                      [weekviewNormalEventTemplate]="template"
                      [weekviewAllDayEventTemplate]="template"
                      [dayviewNormalEventTemplate]="template"
                      [dayviewAllDayEventTemplate]="template"
                      [monthviewEventDetailTemplate]="template"
                      scrollToHour="8"
                      [locale]="translate.currentLang"
                      formatHourColumn="{{'formatHourColumn' | translate }}"
                      formatWeekTitle="{{'formatWeekTitle' | translate }}"
                      formatDayTitle="{{'formatDayTitle' | translate }}"
                      startingDayWeek="1"
                      startingDayMonth="1"
                      allDayLabel="{{'Deadlines' | translate }}">
            </calendar>
          </div>
          <div class="width-100 padding-10 height-100" *ngIf="calendar.mode == 'day'">
            <ng-template #template let-displayEvent="displayEvent" >
              <div class="calendar-event-inner color-39297F border-radius-2px" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
            </ng-template>
            <calendar [eventSource]="eventSource"
                      [calendarMode]="calendar.mode"
                      [currentDate]="calendar.currentDate"
                      (onEventSelected)="onEventSelected($event)"
                      (onTitleChanged)="onViewTitleChanged($event)"
                      (onTimeSelected)="onTimeSelected($event)"
                      step="5"
                      class="calendar height-100 color-6049C4"
                      autoSelect="false"
                      [weekviewNormalEventTemplate]="template"
                      [weekviewAllDayEventTemplate]="template"
                      [dayviewNormalEventTemplate]="template"
                      [dayviewAllDayEventTemplate]="template"
                      [monthviewEventDetailTemplate]="template"
                      scrollToHour="8"
                      [locale]="translate.currentLang"
                      formatHourColumn="{{'formatHourColumn' | translate }}"
                      formatWeekTitle="{{'formatWeekTitle' | translate }}"
                      formatDayTitle="{{'formatDayTitle' | translate }}"
                      startingDayWeek="1"
                      startingDayMonth="1"
                      allDayLabel="{{'Deadlines' | translate }}">
            </calendar>
          </div>
          <div class="width-100 padding-10 height-100" *ngIf="calendar.mode == 'week'">
            <ng-template #headerTemplate let-viewDate="viewDate"> 
              <div class="custom-day-header"> {{ viewDate.dayHeader }} hi </div> 
            </ng-template>
            <ng-template #weekviewEventTemplate let-displayEvent="displayEvent">
              <div class="calendar-event-inner color-39297F border-radius-2px font-size-10px" [ngStyle]="{'background-color': displayEvent.event.color}">{{displayEvent.event.title}}</div>
            </ng-template>
            <calendar [eventSource]="eventSource"
                      [calendarMode]="calendar.mode"
                      [currentDate]="calendar.currentDate"
                      (onEventSelected)="onEventSelected($event)"
                      (onTitleChanged)="onViewTitleChanged($event)"
                      (onTimeSelected)="onTimeSelected($event)"
                      class="calendar height-100 color-6049C4"
                      autoSelect="false"
                      [weekviewHeaderTemplate]="headerTemplate"
                      [weekviewNormalEventTemplate]="weekviewEventTemplate"
                      [weekviewAllDayEventTemplate]="template"
                      [locale]="translate.currentLang"
                      formatHourColumn="{{'formatHourColumn' | translate }}"
                      formatWeekTitle="{{'formatWeekTitle' | translate }}"
                      startingDayWeek="1"
                      allDayLabel="{{'Deadlines' | translate }}">
            </calendar>
          </div>
        </ion-row>
      </div>
    </ion-grid>
  </div>

  <!-- Mobile Navigation Footer -->
  <div class="width-90 height-80px margin-bottom-15 margin-horizontal-auto flex" *ngIf="loggedin && isApp && userProfile && viewpoint != 'CapturePage' && viewpoint != 'ProcessCapturePage' && pageCtrl != 'ProjectOverview' && viewpoint != 'FeedbackPage'">
    <ion-row class="width-100 height-90 margin-vertical-auto border-radius-15px border-50per navigation-bar">
      <ion-col class="no-padding">
        <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToToDoPage()">
          <ion-row>
          <img *ngIf="viewpoint == 'ToDoPage'" src="../../assets/icon/purple/icon_todo_active.svg" height="24" class="margin-auto">
          <img *ngIf="viewpoint != 'ToDoPage'" src="../../assets/icon/purple/icon_todo.svg" height="24" class="margin-auto">
          </ion-row>
        </button>
      </ion-col>
      <ion-col class="no-padding">
        <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToItemsPage()">
          <ion-row>
          <img *ngIf="viewpoint == 'ItemsPage'" src="../../assets/icon/purple/icon_items_active.svg" height="24" class="margin-auto">
          <img *ngIf="viewpoint != 'ItemsPage'" src="../../assets/icon/purple/icon_items.svg" height="24" class="margin-auto">
          </ion-row>
        </button>
      </ion-col>
      <ion-col class="no-padding">
        <button class="transparent no-padding margin-auto width-100 height-100" (click)="presentPopover('add')">
          <ion-row>
          <img src="../../assets/icon/purple/icon_add.svg" height="48" class="margin-auto">
          </ion-row>
        </button>
      </ion-col>
      <ion-col class="no-padding">
        <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToAssistantPage()">
          <ion-row>
          <img *ngIf="viewpoint == 'AssistantPage'" src="../../assets/icon/purple/icon_assistant_active.svg" height="24" class="margin-auto">
          <img *ngIf="viewpoint != 'AssistantPage'" src="../../assets/icon/purple/icon_assistant.svg" height="24" class="margin-auto">
          </ion-row>
        </button>
      </ion-col>
      <ion-col class="no-padding">
        <button class="transparent no-padding margin-auto width-100 height-100" (click)="goToCalendarPage()">
          <ion-row>
          <img *ngIf="viewpoint == 'CalendarPage'" src="../../assets/icon/purple/icon_calendar_active.svg" height="24" class="margin-auto">
          <img *ngIf="viewpoint != 'CalendarPage'" src="../../assets/icon/purple/icon_calendar.svg" height="24" class="margin-auto">
          </ion-row>
        </button>
      </ion-col>
    </ion-row>
  </div>


</ion-content>
